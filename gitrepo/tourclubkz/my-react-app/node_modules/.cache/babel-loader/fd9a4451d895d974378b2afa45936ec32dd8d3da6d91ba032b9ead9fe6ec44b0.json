{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useLocation}from\"react-router-dom\";import'./navpan.css';import Logout from\"./logout\";import*as jwtDecode from'jwt-decode';import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Navpan(){const token=localStorage.getItem('token');const[activeIcon,setActiveIcon]=useState(\"\");const location=useLocation();const[isOpen,setIsOpen]=useState(false);const[knopka,setKnopka]=useState(true);const[data,setData]=useState([]);const decodedToken=jwtDecode.jwtDecode(token);const[loading,setLoading]=useState(true);const id=decodedToken.sub;const role=decodedToken.role;const name=decodedToken.name;const surname=decodedToken.surname;useEffect(()=>{const fetchData=async()=>{try{// Выполняем HTTP запрос к PHP файлу\nconst response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/showavatar.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:id})});const data=await response.json();setData(data);}catch(error){console.error('Ошибка при загрузке данных:',error);}finally{// Устанавливаем статус загрузки в false после завершения запроса\nsetLoading(false);}};fetchData();},[id]);const avatarSrc=data.avatar?\"\".concat(BASE_URL,\"tourschoolphp/\").concat(data.avatar):null;const toggleNav=()=>{setIsOpen(!isOpen);};useEffect(()=>{const currentPath=location.pathname;switch(currentPath){case\"/profile\":setActiveIcon(\"profile\");break;case\"/courses\":setActiveIcon(\"vector\");break;case\"/messages\":setActiveIcon(\"message\");break;default:setActiveIcon(\"\");}},[location]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleNav,className:\"hamburger\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./hamburger.svg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"navpan \".concat(isOpen?\"\":\"hidden\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tourlogo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logosmall\"}),/*#__PURE__*/_jsx(\"div\",{className:\"logotext\",children:\"Tour Club\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"blockforavatarka2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatarkaprof2\",children:avatarSrc&&/*#__PURE__*/_jsx(\"img\",{src:avatarSrc,alt:\"User Avatar\",className:\"avatar-image2\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nameblock\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"namenav\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"namenav\",children:surname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textnavblock\",children:[/*#__PURE__*/_jsx(Link,{className:\"mainicontextactive\",to:\"/profile\",children:/*#__PURE__*/_jsx(\"div\",{className:activeIcon===\"profile\"?\"mainicontextactive\":\"mainicontext\",children:\"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"})}),/*#__PURE__*/_jsx(Link,{className:\"mainicontextactive\",to:\"/courses\",children:/*#__PURE__*/_jsx(\"div\",{className:activeIcon===\"vector\"?\"mainicontextactive\":\"mainicontext\",children:\"\\u041A\\u0443\\u0440\\u0441\\u044B\"})}),/*#__PURE__*/_jsx(Link,{className:\"mainicontextactive\",to:\"/messages\",children:/*#__PURE__*/_jsx(\"div\",{className:activeIcon===\"message\"?\"mainicontextactive\":\"mainicontext\",children:\"\\u0427\\u0430\\u0442\"})}),/*#__PURE__*/_jsx(\"div\",{className:activeIcon===\"plane\"?\"mainicontextactive\":\"mainicontext\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430 \\u0442\\u0443\\u0440\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"div\",{className:\"logoutbutton\",children:/*#__PURE__*/_jsx(Logout,{})})]})]})})]});}export default Navpan;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","Logout","jwtDecode","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navpan","token","localStorage","getItem","activeIcon","setActiveIcon","location","isOpen","setIsOpen","knopka","setKnopka","data","setData","decodedToken","loading","setLoading","id","sub","role","name","surname","fetchData","response","fetch","concat","method","headers","body","JSON","stringify","user","json","error","console","avatarSrc","avatar","toggleNav","currentPath","pathname","children","onClick","className","src","alt","to"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/navpan.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport './navpan.css';\nimport Logout from \"./logout\";\nimport * as jwtDecode from 'jwt-decode';\nimport { BASE_URL } from './config';\nfunction Navpan() {\n    const token = localStorage.getItem('token');\n    const [activeIcon, setActiveIcon] = useState(\"\");\n    const location = useLocation();\n    const [isOpen, setIsOpen] = useState(false);\n    const [knopka, setKnopka] = useState(true);\n    const [data, setData] = useState([]);\n    const decodedToken = jwtDecode.jwtDecode(token);\n    const [loading, setLoading] = useState(true);\n    const id = decodedToken.sub;\n    const role = decodedToken.role;\n    const name = decodedToken.name;\n    const surname = decodedToken.surname;\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                // Выполняем HTTP запрос к PHP файлу\n                const response = await fetch(`${BASE_URL}tourschoolphp/showavatar.php`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ user: id }),\n                });\n\n                const data = await response.json();\n                setData(data);\n\n            } catch (error) {\n                console.error('Ошибка при загрузке данных:', error);\n            } finally {\n                // Устанавливаем статус загрузки в false после завершения запроса\n                setLoading(false);\n            }\n        }\n\n        fetchData();\n    }, [id]);\n    const avatarSrc = data.avatar ? `${BASE_URL}tourschoolphp/${data.avatar}` : null;\n    const toggleNav = () => {\n        setIsOpen(!isOpen);\n    };\n  \n    useEffect(() => {\n        const currentPath = location.pathname;\n        switch (currentPath) {\n            case \"/profile\":\n                setActiveIcon(\"profile\");\n                break;\n            case \"/courses\":\n                setActiveIcon(\"vector\");\n                break;\n            case \"/messages\":\n                setActiveIcon(\"message\");\n                break;\n            default:\n                setActiveIcon(\"\");\n        }\n    }, [location]);\n\n    return (\n        <>\n            <button onClick={toggleNav} className=\"hamburger\">\n                <img src=\"./hamburger.svg\"></img>\n            </button>               \n            <div className={`navpan ${isOpen ? \"\" : \"hidden\"}`}>\n                <div className=\"logo\">\n                    <div className=\"tourlogo\">\n                        <div className=\"logosmall\"></div>\n                        <div className=\"logotext\">Tour Club</div>\n                    </div>\n                    <div className=\"blockforavatarka2\">\n                <div className=\"avatarkaprof2\">\n                {avatarSrc && <img src={avatarSrc} alt=\"User Avatar\" className=\"avatar-image2\" />}\n                </div>\n                </div>\n\n<div className=\"nameblock\">\n        <div className=\"namenav\">{name}</div>\n        <div className=\"namenav\">{surname}</div>\n        </div>\n        <div className=\"textnavblock\">\n                    <Link className = \"mainicontextactive\" to=\"/profile\">\n                        <div className={activeIcon === \"profile\" ? \"mainicontextactive\" : \"mainicontext\"}>Личный кабинет</div>\n                    </Link>\n                    <Link className = \"mainicontextactive\" to=\"/courses\">\n                       \n                        <div className={activeIcon === \"vector\" ? \"mainicontextactive\" : \"mainicontext\"}>Курсы</div>\n                    </Link>\n                    <Link className = \"mainicontextactive\" to=\"/messages\">\n                      \n                        <div className={activeIcon === \"message\" ? \"mainicontextactive\" : \"mainicontext\"}>Чат</div>\n                    </Link>\n            \n                    <div className={activeIcon === \"plane\" ? \"mainicontextactive\" : \"mainicontext\"}>Продажа туров</div>\n                    <div className=\"logoutbutton\">\n            <Logout />\n        </div>\n                    </div>\n                   \n                </div>\n              \n            </div>\n        </>\n    )\n}\n\nexport default Navpan;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,cAAc,CACrB,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,GAAK,CAAAC,SAAS,KAAM,YAAY,CACvC,OAASC,QAAQ,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACpC,QAAS,CAAAC,MAAMA,CAAA,CAAG,CACd,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAAmB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACsB,MAAM,CAAEC,SAAS,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACwB,IAAI,CAAEC,OAAO,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAA0B,YAAY,CAAGrB,SAAS,CAACA,SAAS,CAACS,KAAK,CAAC,CAC/C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAA6B,EAAE,CAAGH,YAAY,CAACI,GAAG,CAC3B,KAAM,CAAAC,IAAI,CAAGL,YAAY,CAACK,IAAI,CAC9B,KAAM,CAAAC,IAAI,CAAGN,YAAY,CAACM,IAAI,CAC9B,KAAM,CAAAC,OAAO,CAAGP,YAAY,CAACO,OAAO,CACpChC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAiC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAI/B,QAAQ,iCAAgC,CACpEgC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,IAAI,CAAEd,EAAG,CAAC,CACrC,CAAC,CAAC,CAEF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAW,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCnB,OAAO,CAACD,IAAI,CAAC,CAEjB,CAAE,MAAOqB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACvD,CAAC,OAAS,CACN;AACAjB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDM,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACL,EAAE,CAAC,CAAC,CACR,KAAM,CAAAkB,SAAS,CAAGvB,IAAI,CAACwB,MAAM,IAAAX,MAAA,CAAM/B,QAAQ,mBAAA+B,MAAA,CAAiBb,IAAI,CAACwB,MAAM,EAAK,IAAI,CAChF,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACpB5B,SAAS,CAAC,CAACD,MAAM,CAAC,CACtB,CAAC,CAEDnB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAiD,WAAW,CAAG/B,QAAQ,CAACgC,QAAQ,CACrC,OAAQD,WAAW,EACf,IAAK,UAAU,CACXhC,aAAa,CAAC,SAAS,CAAC,CACxB,MACJ,IAAK,UAAU,CACXA,aAAa,CAAC,QAAQ,CAAC,CACvB,MACJ,IAAK,WAAW,CACZA,aAAa,CAAC,SAAS,CAAC,CACxB,MACJ,QACIA,aAAa,CAAC,EAAE,CAAC,CACzB,CACJ,CAAC,CAAE,CAACC,QAAQ,CAAC,CAAC,CAEd,mBACIT,KAAA,CAAAE,SAAA,EAAAwC,QAAA,eACI5C,IAAA,WAAQ6C,OAAO,CAAEJ,SAAU,CAACK,SAAS,CAAC,WAAW,CAAAF,QAAA,cAC7C5C,IAAA,QAAK+C,GAAG,CAAC,iBAAiB,CAAM,CAAC,CAC7B,CAAC,cACT/C,IAAA,QAAK8C,SAAS,WAAAjB,MAAA,CAAYjB,MAAM,CAAG,EAAE,CAAG,QAAQ,CAAG,CAAAgC,QAAA,cAC/C1C,KAAA,QAAK4C,SAAS,CAAC,MAAM,CAAAF,QAAA,eACjB1C,KAAA,QAAK4C,SAAS,CAAC,UAAU,CAAAF,QAAA,eACrB5C,IAAA,QAAK8C,SAAS,CAAC,WAAW,CAAM,CAAC,cACjC9C,IAAA,QAAK8C,SAAS,CAAC,UAAU,CAAAF,QAAA,CAAC,WAAS,CAAK,CAAC,EACxC,CAAC,cACN5C,IAAA,QAAK8C,SAAS,CAAC,mBAAmB,CAAAF,QAAA,cACtC5C,IAAA,QAAK8C,SAAS,CAAC,eAAe,CAAAF,QAAA,CAC7BL,SAAS,eAAIvC,IAAA,QAAK+C,GAAG,CAAER,SAAU,CAACS,GAAG,CAAC,aAAa,CAACF,SAAS,CAAC,eAAe,CAAE,CAAC,CAC5E,CAAC,CACD,CAAC,cAEtB5C,KAAA,QAAK4C,SAAS,CAAC,WAAW,CAAAF,QAAA,eAClB5C,IAAA,QAAK8C,SAAS,CAAC,SAAS,CAAAF,QAAA,CAAEpB,IAAI,CAAM,CAAC,cACrCxB,IAAA,QAAK8C,SAAS,CAAC,SAAS,CAAAF,QAAA,CAAEnB,OAAO,CAAM,CAAC,EACnC,CAAC,cACNvB,KAAA,QAAK4C,SAAS,CAAC,cAAc,CAAAF,QAAA,eACjB5C,IAAA,CAACN,IAAI,EAACoD,SAAS,CAAG,oBAAoB,CAACG,EAAE,CAAC,UAAU,CAAAL,QAAA,cAChD5C,IAAA,QAAK8C,SAAS,CAAErC,UAAU,GAAK,SAAS,CAAG,oBAAoB,CAAG,cAAe,CAAAmC,QAAA,CAAC,iFAAc,CAAK,CAAC,CACpG,CAAC,cACP5C,IAAA,CAACN,IAAI,EAACoD,SAAS,CAAG,oBAAoB,CAACG,EAAE,CAAC,UAAU,CAAAL,QAAA,cAEhD5C,IAAA,QAAK8C,SAAS,CAAErC,UAAU,GAAK,QAAQ,CAAG,oBAAoB,CAAG,cAAe,CAAAmC,QAAA,CAAC,gCAAK,CAAK,CAAC,CAC1F,CAAC,cACP5C,IAAA,CAACN,IAAI,EAACoD,SAAS,CAAG,oBAAoB,CAACG,EAAE,CAAC,WAAW,CAAAL,QAAA,cAEjD5C,IAAA,QAAK8C,SAAS,CAAErC,UAAU,GAAK,SAAS,CAAG,oBAAoB,CAAG,cAAe,CAAAmC,QAAA,CAAC,oBAAG,CAAK,CAAC,CACzF,CAAC,cAEP5C,IAAA,QAAK8C,SAAS,CAAErC,UAAU,GAAK,OAAO,CAAG,oBAAoB,CAAG,cAAe,CAAAmC,QAAA,CAAC,2EAAa,CAAK,CAAC,cACnG5C,IAAA,QAAK8C,SAAS,CAAC,cAAc,CAAAF,QAAA,cACrC5C,IAAA,CAACJ,MAAM,GAAE,CAAC,CACT,CAAC,EACW,CAAC,EAEL,CAAC,CAEL,CAAC,EACR,CAAC,CAEX,CAEA,cAAe,CAAAS,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}