{"ast":null,"code":"import React,{useState}from\"react\";import{jwtDecode}from'jwt-decode';import{BASE_URL}from'./config';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Authcode(){const token=localStorage.getItem('token');const decodedToken=jwtDecode(token);const id=decodedToken.sub;const[emailModal,setEmailModal]=useState(false);const[isLoading,setIsLoading]=useState(false);const[unicCode,setUnicCode]=useState('');const handleCloseEmail=()=>{setEmailModal(false);};const handleGetAuthCode=async()=>{setEmailModal(true);setIsLoading(true);const data={id:id};try{const response=await axios.post(\"\".concat(BASE_URL,\"tourschoolphp/authcode.php\"),JSON.stringify(data),{headers:{'Content-Type':'application/json'}});if(response.data.success){setIsLoading(false);console.log(\"Уникальный код был создан\");setUnicCode(response.data.unic_code);}else{console.error('Error sending message:',response.data.error);}}catch(error){if(error.response){// Серверная ошибка\nconsole.error('Server Error:',error.response.data);}else if(error.request){// Ошибка при отправке запроса\nconsole.error('Request Error:',error.request);}else{// Другая ошибка\nconsole.error('Error:',error.message);}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"knopkaApplication\",onClick:handleGetAuthCode,children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"applicationtextprof\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043E\\u0434 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"})]}),emailModal&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{id:\"myModal\",className:\"modalunic\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-contentunic\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"closeemail\",onClick:handleCloseEmail,children:\"\\xD7\"}),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"/vercodestud.svg\",className:\"svgemail\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vercodetext\",children:\"\\u041A\\u043E\\u0434 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430 \\u0434\\u043B\\u044F \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vercodecode\",children:unicCode}),/*#__PURE__*/_jsx(\"div\",{className:\"vercodenot\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u044C\\u0442\\u0435 \\u044D\\u0442\\u043E\\u0442 \\u043A\\u043E\\u0434 \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0443\\u0447\\u0435\\u043D\\u0438\\u043A\\u0443, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u043D \\u0441\\u043C\\u043E\\u0433 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u0432 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435 \\u0432\\u0430\\u0448\\u0435\\u0433\\u043E \\u0443\\u0447\\u0435\\u043D\\u0438\\u043A\\u0430\"})]})]})})})]});}export default Authcode;","map":{"version":3,"names":["React","useState","jwtDecode","BASE_URL","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Authcode","token","localStorage","getItem","decodedToken","id","sub","emailModal","setEmailModal","isLoading","setIsLoading","unicCode","setUnicCode","handleCloseEmail","handleGetAuthCode","data","response","post","concat","JSON","stringify","headers","success","console","log","unic_code","error","request","message","children","className","onClick","src"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/authocode.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { jwtDecode } from 'jwt-decode';\nimport { BASE_URL } from './config';\nimport axios from 'axios';\nfunction Authcode() {\n    const token = localStorage.getItem('token');\n    const decodedToken = jwtDecode(token);\n    const id = decodedToken.sub;\n    const [emailModal, setEmailModal] = useState(false); \n    const [isLoading, setIsLoading] = useState(false);\n\n    const [unicCode, setUnicCode] = useState(''); \n    const handleCloseEmail = () => {\n          setEmailModal(false)\n          };\n    \n          \n    const handleGetAuthCode = async () => {\n        setEmailModal(true)\n        setIsLoading(true)\n      const data = {\n        id: id\n      };\n      \n        try {\n          const response = await axios.post(\n            `${BASE_URL}tourschoolphp/authcode.php`,\n            JSON.stringify(data),\n            {\n              headers: {\n                'Content-Type': 'application/json',\n              },\n            }\n          );\n      \n          if (response.data.success) {\n            setIsLoading(false)\n           console.log(\"Уникальный код был создан\");\n           setUnicCode(response.data.unic_code)\n       \n          } else {\n            console.error('Error sending message:', response.data.error);\n          }\n        } catch (error) {\n    if (error.response) {\n        // Серверная ошибка\n        console.error('Server Error:', error.response.data);\n    } else if (error.request) {\n        // Ошибка при отправке запроса\n        console.error('Request Error:', error.request);\n    } else {\n        // Другая ошибка\n        console.error('Error:', error.message);\n    }\n}\n      };\n\n    return(\n        <>\n                <div className=\"knopkaApplication\" onClick={handleGetAuthCode}> <div className=\"applicationtextprof\">Создать код авторизации</div>\n        </div>\n\n\n{emailModal && (\n    <>\n<div id=\"myModal\" className=\"modalunic\">\n\n<div className=\"modal-contentunic\">\n<span className=\"closeemail\" onClick={handleCloseEmail}>×</span>\n{isLoading ? (\n          <div className=\"loading-spinner\">\n            <div className=\"spinner\"></div>\n            <span>Загрузка...</span>\n          </div>\n        ) : (\n            <>\n    <img src=\"/vercodestud.svg\" className=\"svgemail\"></img>\n    \n<div className=\"vercodetext\">Код доступа для нового пользователя:</div>\n<div className=\"vercodecode\">{unicCode}</div>\n<div className=\"vercodenot\">Отправьте этот код вашему ученику, чтобы он смог зарегестрироваться в качестве вашего ученика</div>\n</>\n        )}\n</div>\n\n\n</div>\n</>\n)}\n</>\n\n    )\n    \n}\nexport default Authcode;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}