{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/messages.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\nimport './message.css';\nimport Navpanmini from './navpanmini';\nimport { BASE_URL } from './config';\nimport { BrowserRouter as Router, Switch, Route, Link, Routes } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ListStudents = () => {\n  _s();\n  var _messages$selectedStu;\n  const prevScrollHeightRef = useRef(0);\n  const [students, setStudents] = useState([]);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState({}); // Изменено на объект\n  const [unreadMessages, setUnreadMessages] = useState({});\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [shouldScrollToBottom, setShouldScrollToBottom] = useState(true);\n  const [senderId, setSenderId] = useState(null);\n  const [showRightChats, setShowRightChats] = useState(true);\n  const [fullscreenChat, setFullscreenChat] = useState(false);\n  const [attachedFile, setAttachedFile] = useState(null);\n  const [showUserModal, setShowUserModal] = useState(false);\n  // Добавьте следующее в начале компонента\n  const [imageLoading, setImageLoading] = useState(true);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [messagesCont, setMessagesCont] = useState(20);\n  const prevScrollTopRef = useRef(0);\n  let prevDate = null;\n  const [forwardpic, setForwardpic] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const prevScrollRatioRef = useRef(0);\n  const handleToggleRightChats = () => {\n    setShowRightChats(!showRightChats);\n  };\n  const messagesContRef = useRef(messagesCont);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const decodedToken = jwtDecode(token);\n        const id = decodedToken.sub;\n        setSenderId(id);\n        const role = decodedToken.role;\n        let response;\n        if (role === 'curator') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/usercurlist.php`, {\n            title: id\n          });\n        } else if (role === 'student') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/studentMessages.php`, {\n            title: id\n          });\n        } else if (role === 'admin') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/adminleslist.php`, {\n            title: id\n          });\n        }\n        const data = response.data;\n        if (Array.isArray(data)) {\n          setStudents(data);\n        } else {\n          console.error('Data is not an array:', data);\n        }\n      } catch (error) {\n        console.error('Error fetching students:', error);\n      }\n    };\n    fetchData();\n    const interval = setInterval(() => {\n      fetchData();\n    }, 1000); // обновление каждую секунду\n\n    return () => clearInterval(interval); // Очистка интервала при размонтировании компонента\n  }, []);\n  const chatMessagesRef = useRef();\n  useEffect(() => {\n    const handleScroll = () => {\n      const container = chatMessagesRef.current;\n      if (container) {\n        const isAtBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 50;\n        const isAtTop = container.scrollTop === 0; // Добавлено условие для верхней части скролла\n\n        if (isAtBottom) {\n          setScrollPosition(container.scrollTop);\n        }\n        if (isAtTop) {\n          setMessagesCont(prevMessagesCont => {\n            const newMessagesCont = prevMessagesCont + 30;\n            // Fetch messages using newMessagesCont here\n            getMessages(selectedStudent.id, senderId, newMessagesCont);\n            return newMessagesCont;\n          });\n        }\n      }\n    };\n    const chatContainer = chatMessagesRef.current;\n    if (chatContainer) {\n      chatContainer.addEventListener('scroll', handleScroll);\n    }\n    return () => {\n      if (chatContainer) {\n        chatContainer.removeEventListener('scroll', handleScroll);\n      }\n    };\n  }, [chatMessagesRef.current]);\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const container = chatMessagesRef.current;\n      const handleScroll = () => {\n        const isAtBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 50;\n        if (isAtBottom) {\n          setShouldScrollToBottom(true);\n        } else {\n          setShouldScrollToBottom(false);\n        }\n      };\n      container.addEventListener('scroll', handleScroll);\n      return () => {\n        container.removeEventListener('scroll', handleScroll);\n      };\n    }\n  }, [chatMessagesRef.current]);\n  useEffect(() => {\n    if (selectedStudent) {\n      getMessages(selectedStudent.id, senderId, messagesCont);\n    }\n  }, [selectedStudent, messagesCont]); // Add messagesCont to the dependency array\n\n  useEffect(() => {\n    if (shouldScrollToBottom && chatMessagesRef.current) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\n    }\n  }, [messages, shouldScrollToBottom]);\n  const handleStudentsClick = student => {\n    if (student.id === 'selectAll') {\n      handleSelectAll();\n    } else {\n      const isSelected = selectedStudents.some(selectedStudent => selectedStudent.id === student.id);\n      if (isSelected) {\n        // Remove the student from the selectedStudents array\n        setSelectedStudents(prevSelectedStudents => prevSelectedStudents.filter(selectedStudent => selectedStudent.id !== student.id));\n      } else {\n        // Add the student to the selectedStudents array\n        setSelectedStudents(prevSelectedStudents => [...prevSelectedStudents, student]);\n      }\n    }\n  };\n  const markMessagesAsRead = async (receiverId, senderId) => {\n    try {\n      const response = await axios.post(`${BASE_URL}tourschoolphp/markMessagesAsRead.php`, JSON.stringify({\n        receiver_user_id: receiverId,\n        sender_user_id: senderId\n      }), {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.data.success) {\n        console.error('Error marking messages as read:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error marking messages as read:', error);\n    }\n  };\n  useEffect(() => {\n    if (selectedStudent) {\n      const interval = setInterval(() => {\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [selectedStudent]);\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      prevScrollHeightRef.current = chatMessagesRef.current.scrollHeight;\n    }\n  }, [messages]);\n  if (chatMessagesRef.current) {\n    const currentScrollTop = chatMessagesRef.current.scrollTop;\n    console.log(\"Current scroll position:\", currentScrollTop);\n\n    // ... (rest of the scroll position adjustment logic)\n  }\n  useEffect(() => {\n    // Восстанавливаем положение скролла после обновления сообщений\n    if (chatMessagesRef.current) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight - prevScrollHeightRef.current;\n    }\n  }, [selectedStudent]);\n  const handleStudentClick = async student => {\n    setSelectedStudent(student);\n    setFullscreenChat(true);\n    setShowRightChats(false);\n    setShowRightChats(showRightChats);\n    setShowRightChats(!showRightChats);\n    try {\n      setSelectedStudent(student);\n      const token = localStorage.getItem('token');\n      const decodedToken = jwtDecode(token);\n      const senderId = decodedToken.sub;\n      if (senderId !== student.id) {\n        await markMessagesAsRead(student.id, senderId);\n      }\n      getMessages(student.id, senderId, messagesCont);\n      ReadMess(student.id, senderId);\n    } catch (error) {\n      console.error('Error handling student click:', error);\n    }\n  };\n  useEffect(() => {\n    messagesContRef.current = messagesCont;\n  }, [messagesCont]);\n  const getMessages = async (receiverId, senderId, messagesCont) => {\n    try {\n      const response = await axios.post(`${BASE_URL}tourschoolphp/getMessages.php`, JSON.stringify({\n        receiver_user_id: receiverId,\n        sender_user_id: senderId,\n        messagesCont: messagesContRef.current\n      }), {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const messagesArray = Array.from(response.data);\n      setMessages(prev => ({\n        ...prev,\n        [receiverId]: messagesArray\n      }));\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const ReadMess = async (receiverId, senderId) => {\n    try {\n      const response = await axios.post(`${BASE_URL}tourschoolphp/readmessages.php`, JSON.stringify({\n        receiver_user_id: receiverId,\n        sender_user_id: senderId\n      }), {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const handleFileChange = files => {\n    const file = files[0];\n    if (file) {\n      const fileSizeInMB = file.size / (1024 * 1024);\n      const maxSizeInMB = 5;\n      if (fileSizeInMB > maxSizeInMB) {\n        alert(\"Файл слишком большой. Пожалуйста, выберите файл размером до 5 МБ.\");\n      } else {\n        setAttachedFile(file);\n      }\n    }\n  };\n  const handleForwClick = fileName => {\n    setShowUserModal(true);\n    console.log('Forwarding file:', fileName);\n    setForwardpic(fileName);\n  };\n\n  // console.log(messages);\n  const handleSendMessage = async () => {\n    const read = 0;\n\n    // Check if both message and attached file are present\n    if (!selectedStudent || !selectedStudent.id || !message && !attachedFile) {\n      console.error('Error: Missing student ID, message, or attached file');\n      // You can display an error message or handle it in another way\n      return;\n    }\n    const formData = new FormData();\n    formData.append('sender_user_id', senderId);\n    formData.append('receiver_user_id', selectedStudent.id);\n    formData.append('message_text', message);\n    formData.append('is_read', read);\n    formData.append('file', attachedFile);\n    try {\n      const response = await axios.post(`${BASE_URL}tourschoolphp/sendMessage.php`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.data.success) {\n        setMessage('');\n        setAttachedFile(null);\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      } else {\n        console.error('Error sending message:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  const handleSelectAll = () => {\n    setSelectAll(!selectAll);\n    // Если \"Выбрать всех\" включено, выберите всех студентов, в противном случае сбросьте выбор\n    if (!selectAll) {\n      setSelectedStudents([...students]);\n    } else {\n      setSelectedStudents([]);\n    }\n  };\n  const closeModal = () => {\n    setSelectedStudent(null);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const formatMessageDate = createdAt => {\n    const date = new Date(createdAt);\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const formattedHours = hours < 10 ? '0' + hours : hours;\n    const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;\n    return `${formattedHours}:${formattedMinutes}`;\n  };\n  const formatMessageDateMonth = createdAt => {\n    const months = [\"Января\", \"Февраля\", \"Марта\", \"Апреля\", \"Мая\", \"Июня\", \"Июля\", \"Августа\", \"Сентября\", \"Октября\", \"Ноября\", \"Декабря\"];\n    const date = new Date(createdAt);\n    const day = date.getDate();\n    const month = date.getMonth();\n    const formattedDay = day < 10 ? '0' + day : day;\n    const formattedMonth = months[month];\n    return `${formattedDay} ${formattedMonth}`;\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && e.shiftKey) {\n      e.preventDefault();\n      setMessage(prevMessage => prevMessage + '\\n');\n    }\n  };\n  const [maxCharacters, setMaxCharacters] = useState(100);\n  useEffect(() => {\n    const handleResize = () => {\n      const screenWidth = window.innerWidth;\n      if (screenWidth <= 600) {\n        setMaxCharacters(50);\n      } else if (screenWidth <= 1024) {\n        setMaxCharacters(75);\n      } else {\n        setMaxCharacters(100);\n      }\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  const formatMessageText = text => {\n    if (text === null) {\n      return '';\n    }\n    if (text.length > maxCharacters) {\n      const chunks = [];\n      let currentChunk = '';\n      for (let i = 0; i < text.length; i++) {\n        currentChunk += text[i];\n        if ((i + 1) % maxCharacters === 0 || i === text.length - 1) {\n          chunks.push(currentChunk);\n          currentChunk = '';\n        }\n      }\n      return chunks.map((chunk, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [index > 0 && /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 25\n        }, this), chunk]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this));\n    }\n    return text.split('\\n').map((line, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [index > 0 && /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 23\n      }, this), line]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 7\n    }, this));\n  };\n  const handleSendButtonClick = async () => {\n    console.log('Sending messages to selected students:', selectedStudents, showUserModal, forwardpic);\n    const read = 0;\n    const selectedUserIds = selectedStudents.map(user => user.id);\n    console.log('Selected Students:', selectedStudents, senderId, selectedUserIds, read, forwardpic);\n    const formData = new FormData();\n    formData.append('sender_user_id', senderId);\n    formData.append('receiver_user_ids', JSON.stringify(selectedUserIds)); // Use JSON.stringify to convert array to string\n    formData.append('is_read', read);\n    formData.append('file', forwardpic);\n    try {\n      const response = await axios.post(`${BASE_URL}tourschoolphp/forwardmessage.php`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.data.success) {\n        setMessage('');\n        setAttachedFile(null);\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      } else {\n        console.error('Error sending message:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n    setShowUserModal(false);\n  };\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const maxScrollTop = chatMessagesRef.current.scrollHeight - chatMessagesRef.current.clientHeight;\n      prevScrollTopRef.current = chatMessagesRef.current.scrollTop;\n      prevScrollRatioRef.current = prevScrollTopRef.current / maxScrollTop;\n    }\n  }, [messages]); // Обновляем ref при изменении messages\n\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const newMaxScrollTop = chatMessagesRef.current.scrollHeight - chatMessagesRef.current.clientHeight;\n      let newScrollTop = prevScrollTopRef.current;\n      if (newScrollTop > newMaxScrollTop) {\n        newScrollTop = prevScrollRatioRef.current * newMaxScrollTop;\n      }\n      chatMessagesRef.current.scrollTop = newScrollTop;\n    }\n  }, [messages]); // Восстанавливаем позицию при изменении messages\n\n  const sortedStudents = students.slice().sort((a, b) => {\n    // Если у студента `a` нет последнего сообщения или его message_id равен null, то он остается на своем месте\n    if (!a.last_message || !a.last_message.message_id) {\n      if (!b.last_message || !b.last_message.message_id) return 0;\n      // Возвращаем 1, чтобы `a` остался на своем месте\n      return 1;\n    }\n    // Если у студента `b` нет последнего сообщения или его message_id равен null, то он считается меньшим и идет выше в списке\n    if (!b.last_message || !b.last_message.message_id) return -1;\n    // Возвращаем разницу между message_id, как в предыдущем коде\n    return b.last_message.message_id - a.last_message.message_id;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"couratorjs\",\n    children: [/*#__PURE__*/_jsxDEV(Navpanmini, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"hamburgerchat\",\n      onClick: handleToggleRightChats,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"./hamburger.svg\",\n        alt: \"Toggle Right Chats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `rightchats ${showRightChats ? 'show' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `rightchats-container ${selectedStudent ? 'selected' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chath\",\n          children: \"\\u0427\\u0430\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatinfousers\",\n          children: sortedStudents.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `student-item ${selectedStudent === student ? 'selected' : ''}`,\n            onClick: () => handleStudentClick(student),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatarka\",\n              children: student.avatar && /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avamessages\",\n                src: `${BASE_URL}tourschoolphp/${student.avatar}`,\n                alt: `${student.name} ${student.surname}'s Avatar`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 32\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"studlastmess\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-name\",\n                children: [student.name, '   ', student.surname, student.unread_messages > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"notification-dot\",\n                  children: student.unread_messages\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-lastmess\",\n                children: student.last_message && student.last_message.message_text && student.last_message.message_text.length > 20 ? `${student.last_message.message_text.slice(0, 20)}...` : student.last_message && student.last_message.message_text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 9\n            }, this)]\n          }, student.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 5\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `leftchat ${fullscreenChat ? 'fullscreen' : ''}`,\n      children: selectedStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal2\",\n        onClick: () => selectedStudent.id && ReadMess(selectedStudent.id, senderId),\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: `/profile/${selectedStudent.id}`,\n          className: \"topnamestud\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"roundavatarka\",\n            children: selectedStudent.avatar && /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"avamessages\",\n              src: `${BASE_URL}tourschoolphp/${selectedStudent.avatar}`,\n              alt: `${selectedStudent.name} ${selectedStudent.surname}'s Avatar`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [selectedStudent.name, \" \", selectedStudent.surname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          ref: chatMessagesRef,\n          children: (_messages$selectedStu = messages[selectedStudent.id]) === null || _messages$selectedStu === void 0 ? void 0 : _messages$selectedStu.map((message, index) => {\n            const currentDate = formatMessageDateMonth(message.created_at);\n            const showDate = prevDate !== currentDate; // Проверяем, отличается ли текущая дата от предыдущей\n\n            // Если текущая дата отличается от предыдущей, сохраняем текущую дату\n            if (showDate) {\n              prevDate = currentDate;\n            }\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: message.sender_user_id === senderId ? 'outgoing_msg' : 'incoming_msg',\n              children: [showDate && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-date\",\n                children: currentDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"msg\",\n                children: (message.message_text || message.file_name) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: message.sender_user_id === senderId ? 'outgoing-text' : 'incoming-text',\n                  children: [formatMessageText(message.message_text), message.file_name && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `file-container ${message.sender_user_id === senderId ? 'outgoing-file' : 'incoming-file'}`,\n                    children: message.file_name.includes('.jpg') || message.file_name.includes('.jpeg') || message.file_name.includes('.png') ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        className: \"picturemess\",\n                        src: `${BASE_URL}tourschoolphp/${message.file_name}`,\n                        alt: \"Attached Image\",\n                        onError: e => e.target.src = 'path/to/placeholder.jpg' // Optional placeholder\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 638,\n                        columnNumber: 13\n                      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                        className: \"forw\",\n                        src: \"./forward.svg\",\n                        alt: \"Forward Icon\",\n                        onClick: () => handleForwClick(message.file_name)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 644,\n                        columnNumber: 13\n                      }, this)]\n                    }, void 0, true) :\n                    /*#__PURE__*/\n                    /* Handle non-image files */\n                    _jsxDEV(\"a\", {\n                      className: \"ahrew\",\n                      href: `${BASE_URL}tourschoolphp/${message.file_name}`,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          lineHeight: '60px'\n                        },\n                        children: message.file_name.slice(4)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 654,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 634,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"message-date\",\n                    children: formatMessageDate(message.created_at)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 661,\n                    columnNumber: 5\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 3\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 12\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 11\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alltextandyellow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"yellowbuttonchat2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"fileInput\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"./clip.svg\",\n                alt: \"Attach File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"fileInput\",\n              type: \"file\",\n              accept: \".pdf, .doc, .docx, .jpg, .jpeg, .png\",\n              onChange: e => handleFileChange(e.target.files),\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 15\n          }, this), attachedFile && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"attached-file-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: attachedFile.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"- \", attachedFile.size, \" bytes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"inin\",\n              value: message,\n              placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n              onChange: e => setMessage(e.target.value),\n              onKeyDown: handleKeyDown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"yellowbuttonchat\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"./sendmessage.svg\",\n                onClick: handleSendMessage,\n                alt: \"Send Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 7\n    }, this), showUserModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rightchats2 ${showRightChats ? 'show' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowUserModal(false),\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `stuсdent-item ${selectAll ? 'selected' : ''}`,\n            onClick: () => handleStudentsClick({\n              id: 'selectAll'\n            }),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `student-name2 ${selectAll ? 'selected-name' : ''}`,\n              children: \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0432\\u0441\\u0435\\u0445\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `rightchats-container ${selectedStudents.length > 0 ? 'selected' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chatinfousers\",\n              children: students.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `student-item ${selectedStudents.some(selectedStudent => selectedStudent.id === student.id) ? 'selected' : ''}`,\n                onClick: () => handleStudentsClick(student),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `avatarka ${selectedStudents.some(selectedStudent => selectedStudent.id === student.id) ? 'selected-avatar' : ''}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 737,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `student-name ${selectedStudents.some(selectedStudent => selectedStudent.id === student.id) ? 'selected-name' : ''}`,\n                  children: [student.name, \" \", student.surname, unreadMessages[student.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notification-dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 740,\n                    columnNumber: 50\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 17\n                }, this)]\n              }, student.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 15\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 11\n            }, this), selectedStudents.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send-button\",\n              onClick: handleSendButtonClick,\n              children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 560,\n    columnNumber: 5\n  }, this);\n};\n_s(ListStudents, \"QiryzQXAy+ngTTV8OFcJHc2Uzf0=\");\n_c = ListStudents;\nexport default ListStudents;\nvar _c;\n$RefreshReg$(_c, \"ListStudents\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jwtDecode","Navpanmini","BASE_URL","BrowserRouter","Router","Switch","Route","Link","Routes","jsxDEV","_jsxDEV","Fragment","_Fragment","ListStudents","_s","_messages$selectedStu","prevScrollHeightRef","students","setStudents","selectedStudent","setSelectedStudent","message","setMessage","messages","setMessages","unreadMessages","setUnreadMessages","scrollPosition","setScrollPosition","shouldScrollToBottom","setShouldScrollToBottom","senderId","setSenderId","showRightChats","setShowRightChats","fullscreenChat","setFullscreenChat","attachedFile","setAttachedFile","showUserModal","setShowUserModal","imageLoading","setImageLoading","selectedStudents","setSelectedStudents","messagesCont","setMessagesCont","prevScrollTopRef","prevDate","forwardpic","setForwardpic","selectAll","setSelectAll","prevScrollRatioRef","handleToggleRightChats","messagesContRef","fetchData","token","localStorage","getItem","decodedToken","id","sub","role","response","post","title","data","Array","isArray","console","error","interval","setInterval","clearInterval","chatMessagesRef","handleScroll","container","current","isAtBottom","scrollHeight","scrollTop","clientHeight","isAtTop","prevMessagesCont","newMessagesCont","getMessages","chatContainer","addEventListener","removeEventListener","handleStudentsClick","student","handleSelectAll","isSelected","some","prevSelectedStudents","filter","markMessagesAsRead","receiverId","JSON","stringify","receiver_user_id","sender_user_id","headers","success","currentScrollTop","log","handleStudentClick","ReadMess","messagesArray","from","prev","handleFileChange","files","file","fileSizeInMB","size","maxSizeInMB","alert","handleForwClick","fileName","handleSendMessage","read","formData","FormData","append","closeModal","handleKeyDown","e","key","shiftKey","preventDefault","formatMessageDate","createdAt","date","Date","hours","getHours","minutes","getMinutes","formattedHours","formattedMinutes","formatMessageDateMonth","months","day","getDate","month","getMonth","formattedDay","formattedMonth","handleKeyPress","prevMessage","maxCharacters","setMaxCharacters","handleResize","screenWidth","window","innerWidth","formatMessageText","text","length","chunks","currentChunk","i","push","map","chunk","index","children","_jsxFileName","lineNumber","columnNumber","split","line","handleSendButtonClick","selectedUserIds","user","maxScrollTop","newMaxScrollTop","newScrollTop","sortedStudents","slice","sort","a","b","last_message","message_id","className","onClick","src","alt","avatar","name","surname","unread_messages","message_text","href","ref","currentDate","created_at","showDate","file_name","includes","onError","target","rel","style","lineHeight","htmlFor","type","accept","onChange","display","value","placeholder","onKeyDown","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/messages.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\nimport './message.css';\nimport Navpanmini from './navpanmini';\nimport { BASE_URL } from './config';\nimport { BrowserRouter as Router, Switch, Route, Link, Routes } from 'react-router-dom';\nconst ListStudents = () => {\n  const prevScrollHeightRef = useRef(0);\n  const [students, setStudents] = useState([]);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState({}); // Изменено на объект\n  const [unreadMessages, setUnreadMessages] = useState({});\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [shouldScrollToBottom, setShouldScrollToBottom] = useState(true);\n  const [senderId, setSenderId] = useState(null);\n  const [showRightChats, setShowRightChats] = useState(true);\n  const [fullscreenChat, setFullscreenChat] = useState(false);\n  const [attachedFile, setAttachedFile] = useState(null);\n  const [showUserModal, setShowUserModal] = useState(false);\n// Добавьте следующее в начале компонента\nconst [imageLoading, setImageLoading] = useState(true);\nconst [selectedStudents, setSelectedStudents] = useState([]);\n\n\nconst [messagesCont, setMessagesCont] = useState(20);\nconst prevScrollTopRef = useRef(0);\n  let prevDate = null;\nconst [forwardpic, setForwardpic] = useState([]);\nconst [selectAll, setSelectAll] = useState(false);\n\nconst prevScrollRatioRef = useRef(0);\n  const handleToggleRightChats = () => {\n    setShowRightChats(!showRightChats);\n  };\n  const messagesContRef = useRef(messagesCont);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const decodedToken = jwtDecode(token);\n        const id = decodedToken.sub;\n  \n        setSenderId(id);\n        const role = decodedToken.role;\n        let response;\n\n        if (role === 'curator') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/usercurlist.php`, {\n            title: id\n          });\n        } else if (role === 'student') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/studentMessages.php`, {\n            title: id\n          });\n        } else if (role === 'admin') {\n          response = await axios.post(`${BASE_URL}tourschoolphp/adminleslist.php`, {\n            title: id\n          });\n        }\n  \n        const data = response.data;\n        if (Array.isArray(data)) {\n          setStudents(data);\n        } else {\n          console.error('Data is not an array:', data);\n        }\n      } catch (error) {\n        console.error('Error fetching students:', error);\n      }\n    };\n  \n    fetchData();\n\n    const interval = setInterval(() => {\n      fetchData();\n  \n    }, 1000); // обновление каждую секунду\n  \n    return () => clearInterval(interval); // Очистка интервала при размонтировании компонента\n  }, []);\n  \n\n\n\n\n \n\n  const chatMessagesRef = useRef();\n  useEffect(() => {\n    const handleScroll = () => {\n      const container = chatMessagesRef.current;\n      if (container) {\n        const isAtBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 50;\n        const isAtTop = container.scrollTop === 0; // Добавлено условие для верхней части скролла\n    \n        if (isAtBottom) {\n          setScrollPosition(container.scrollTop);\n        }\n    \n        if (isAtTop) {\n          setMessagesCont((prevMessagesCont) => {\n            const newMessagesCont = prevMessagesCont + 30;\n            // Fetch messages using newMessagesCont here\n            getMessages(selectedStudent.id, senderId, newMessagesCont); \n            return newMessagesCont;\n          });\n     \n        }\n      }\n    };\n\n\n    \n    const chatContainer = chatMessagesRef.current;\n    if (chatContainer) {\n      chatContainer.addEventListener('scroll', handleScroll);\n    }\n  \n    return () => {\n      if (chatContainer) {\n        chatContainer.removeEventListener('scroll', handleScroll);\n      }\n    };\n  }, [chatMessagesRef.current]);\n  \n  \n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const container = chatMessagesRef.current;\n  \n      const handleScroll = () => {\n        const isAtBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 50;\n        if (isAtBottom) {\n          setShouldScrollToBottom(true);\n        } else {\n          setShouldScrollToBottom(false);\n        }\n      };\n  \n      container.addEventListener('scroll', handleScroll);\n  \n      return () => {\n        container.removeEventListener('scroll', handleScroll);\n      };\n    }\n  }, [chatMessagesRef.current]);\n  useEffect(() => {\n    if (selectedStudent) {             \n      getMessages(selectedStudent.id, senderId, messagesCont);\n    }\n  }, [selectedStudent, messagesCont]); // Add messagesCont to the dependency array\n\n  useEffect(() => {\n    if (shouldScrollToBottom && chatMessagesRef.current) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\n    }\n  }, [messages, shouldScrollToBottom]);\n\n \n  const handleStudentsClick = (student) => {\n    if (student.id === 'selectAll') {\n      handleSelectAll();\n    } else {\n    \n      const isSelected = selectedStudents.some((selectedStudent) => selectedStudent.id === student.id);\n  \n      if (isSelected) {\n        // Remove the student from the selectedStudents array\n        setSelectedStudents((prevSelectedStudents) =>\n          prevSelectedStudents.filter((selectedStudent) => selectedStudent.id !== student.id)\n        );\n      } else {\n        // Add the student to the selectedStudents array\n        setSelectedStudents((prevSelectedStudents) => [...prevSelectedStudents, student]);\n      }\n    }\n  };\n  \n\n\n  const markMessagesAsRead = async (receiverId, senderId) => {\n    try {\n      const response = await axios.post(\n        `${BASE_URL}tourschoolphp/markMessagesAsRead.php`,\n        JSON.stringify({\n          receiver_user_id: receiverId,\n          sender_user_id: senderId\n        }),\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      \n\n      if (!response.data.success) {\n        console.error('Error marking messages as read:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error marking messages as read:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (selectedStudent) {\n      const interval = setInterval(() => {\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [selectedStudent]);\n  \n  useEffect(() => {\n\n    if (chatMessagesRef.current) {\n      prevScrollHeightRef.current = chatMessagesRef.current.scrollHeight;\n    }\n  }, [messages]);\n  if (chatMessagesRef.current) {\n    const currentScrollTop = chatMessagesRef.current.scrollTop;\n    console.log(\"Current scroll position:\", currentScrollTop);\n\n    // ... (rest of the scroll position adjustment logic)\n  }\n  useEffect(() => {\n    // Восстанавливаем положение скролла после обновления сообщений\n    if (chatMessagesRef.current) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight - prevScrollHeightRef.current;\n    }\n  }, [selectedStudent]);\n\n  const handleStudentClick = async (student) => {\n    setSelectedStudent(student);\n    setFullscreenChat(true);\n    setShowRightChats(false);\n    setShowRightChats(showRightChats);\n    setShowRightChats(!showRightChats);\n\n    try {\n      setSelectedStudent(student);\n      const token = localStorage.getItem('token');\n      const decodedToken = jwtDecode(token);\n      const senderId = decodedToken.sub;\n  \n      if (senderId !== student.id) {\n        await markMessagesAsRead(student.id, senderId);\n      }\n  \n      getMessages(student.id, senderId, messagesCont);\n      ReadMess(student.id, senderId)\n    } catch (error) {\n      console.error('Error handling student click:', error);\n    }\n  };\n  useEffect(() => {\n    messagesContRef.current = messagesCont;\n  }, [messagesCont]);\n\n  const getMessages = async (receiverId, senderId, messagesCont) => {\n    try {\n      const response = await axios.post(\n        `${BASE_URL}tourschoolphp/getMessages.php`,\n        JSON.stringify({\n          receiver_user_id: receiverId,\n          sender_user_id: senderId,\n          messagesCont: messagesContRef.current \n        }),\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n  \n      const messagesArray = Array.from(response.data);\n\n      setMessages((prev) => ({\n        ...prev,\n        [receiverId]: messagesArray\n      }));\n\n   \n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n \n\n  const ReadMess = async (receiverId, senderId) => {\n    try {\n      const response = await axios.post(\n        `${BASE_URL}tourschoolphp/readmessages.php`,\n        JSON.stringify({\n          receiver_user_id: receiverId,\n          sender_user_id: senderId\n        }),\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      );  \n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n\n  const handleFileChange = (files) => {\n    const file = files[0];\n    \n    if (file) {\n\n      const fileSizeInMB = file.size / (1024 * 1024); \n      const maxSizeInMB = 5; \n      \n      if (fileSizeInMB > maxSizeInMB) {\n        alert(\"Файл слишком большой. Пожалуйста, выберите файл размером до 5 МБ.\");\n      } else {\n        setAttachedFile(file);\n      }\n    }\n  };\n  \n  const handleForwClick = (fileName) => {\n    setShowUserModal(true);\n    console.log('Forwarding file:', fileName);\n    setForwardpic(fileName)\n  };\n  \n  // console.log(messages);\n  const handleSendMessage = async () => {\n    const read = 0;\n\n    // Check if both message and attached file are present\n    if (!selectedStudent || !selectedStudent.id || (!message && !attachedFile)) {\n      console.error('Error: Missing student ID, message, or attached file');\n      // You can display an error message or handle it in another way\n      return;\n    }\n  \n    const formData = new FormData();\n    formData.append('sender_user_id', senderId);\n    formData.append('receiver_user_id', selectedStudent.id);\n    formData.append('message_text', message);\n    formData.append('is_read', read);\n    formData.append('file', attachedFile);\n  \n    try {\n      const response = await axios.post(\n        `${BASE_URL}tourschoolphp/sendMessage.php`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n  \n      if (response.data.success) {\n        setMessage('');\n        setAttachedFile(null);\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      } else {\n        console.error('Error sending message:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  const handleSelectAll = () => {\n    setSelectAll(!selectAll);\n    // Если \"Выбрать всех\" включено, выберите всех студентов, в противном случае сбросьте выбор\n    if (!selectAll) {\n      setSelectedStudents([...students]);\n    } else {\n      setSelectedStudents([]);\n    }\n  };\n  \n  const closeModal = () => {\n    setSelectedStudent(null);\n  };\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault(); \n      handleSendMessage();\n    }\n  };\n  const formatMessageDate = (createdAt) => {\n    const date = new Date(createdAt);\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n  \n    const formattedHours = hours < 10 ? '0' + hours : hours;\n    const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;\n  \n    return `${formattedHours}:${formattedMinutes}`;\n  };\n\n  const formatMessageDateMonth = (createdAt) => {\n    const months = [\n        \"Января\", \"Февраля\", \"Марта\", \"Апреля\", \"Мая\", \"Июня\",\n        \"Июля\", \"Августа\", \"Сентября\", \"Октября\", \"Ноября\", \"Декабря\"\n    ];\n\n    const date = new Date(createdAt);\n    const day = date.getDate();\n    const month = date.getMonth();\n  \n    const formattedDay = day < 10 ? '0' + day : day;\n    const formattedMonth = months[month];\n  \n    return `${formattedDay} ${formattedMonth}`;\n};\n   \n\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && e.shiftKey) {\n      e.preventDefault();\n      setMessage((prevMessage) => prevMessage + '\\n');\n    }\n  };\n  const [maxCharacters, setMaxCharacters] = useState(100);  \n  useEffect(() => {\n   \n    const handleResize = () => {\n      const screenWidth = window.innerWidth;\n\n      if (screenWidth <= 600) {\n        setMaxCharacters(50);\n      } else if (screenWidth <= 1024) {\n        setMaxCharacters(75);\n      } else {\n        setMaxCharacters(100);\n      }\n    };\n\n    handleResize(); \n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []); \n\n  const formatMessageText = (text) => {\n    if (text === null) {\n      return '';\n    }\n    if (text.length > maxCharacters) {\n      const chunks = [];\n      let currentChunk = '';\n\n      for (let i = 0; i < text.length; i++) {\n        currentChunk += text[i];\n\n        if ((i + 1) % maxCharacters === 0 || i === text.length - 1) {\n          chunks.push(currentChunk);\n          currentChunk = '';\n        }\n      }\n\n      return chunks.map((chunk, index) => (\n        <React.Fragment key={index}>\n          {index > 0 && <br />}\n          {chunk}\n        </React.Fragment>\n      ));\n    }\n\n\n    return text.split('\\n').map((line, index) => (\n      <React.Fragment key={index}>\n        {index > 0 && <br />}\n        {line}\n      </React.Fragment>\n    ));\n  };\n\n  const handleSendButtonClick = async () => {\n    console.log('Sending messages to selected students:', selectedStudents, showUserModal, forwardpic);\n    const read = 0;\n   \n\n    const selectedUserIds = selectedStudents.map(user => user.id);\n   console.log('Selected Students:', selectedStudents, senderId, selectedUserIds, read, forwardpic);\n    const formData = new FormData();\n    formData.append('sender_user_id', senderId);\n    formData.append('receiver_user_ids', JSON.stringify(selectedUserIds)); // Use JSON.stringify to convert array to string\n    formData.append('is_read', read);\n    formData.append('file', forwardpic);\n  \n    try {\n      const response = await axios.post(\n        `${BASE_URL}tourschoolphp/forwardmessage.php`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n  \n      if (response.data.success) {\n        setMessage('');\n        setAttachedFile(null);\n        getMessages(selectedStudent.id, senderId, messagesCont);\n      } else {\n        console.error('Error sending message:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n    setShowUserModal(false);\n  };\n\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const maxScrollTop = chatMessagesRef.current.scrollHeight - chatMessagesRef.current.clientHeight;\n      prevScrollTopRef.current = chatMessagesRef.current.scrollTop;\n      prevScrollRatioRef.current = prevScrollTopRef.current / maxScrollTop;\n    }\n  }, [messages]); // Обновляем ref при изменении messages\n\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      const newMaxScrollTop = chatMessagesRef.current.scrollHeight - chatMessagesRef.current.clientHeight;\n  \n      let newScrollTop = prevScrollTopRef.current;\n      if (newScrollTop > newMaxScrollTop) {\n        newScrollTop = prevScrollRatioRef.current * newMaxScrollTop;\n      }\n  \n      chatMessagesRef.current.scrollTop = newScrollTop;\n    }\n  }, [messages]); // Восстанавливаем позицию при изменении messages\n\n  \n  const sortedStudents = students.slice().sort((a, b) => {\n    // Если у студента `a` нет последнего сообщения или его message_id равен null, то он остается на своем месте\n    if (!a.last_message || !a.last_message.message_id) {\n\n        if (!b.last_message || !b.last_message.message_id) return 0;\n        // Возвращаем 1, чтобы `a` остался на своем месте\n        return 1;\n    }\n    // Если у студента `b` нет последнего сообщения или его message_id равен null, то он считается меньшим и идет выше в списке\n    if (!b.last_message || !b.last_message.message_id) return -1;\n    // Возвращаем разницу между message_id, как в предыдущем коде\n    return b.last_message.message_id - a.last_message.message_id;\n});\n\n  return (\n    <div className='couratorjs'>\n      <Navpanmini/>\n      <button className=\"hamburgerchat\" onClick={handleToggleRightChats}>\n        <img src=\"./hamburger.svg\" alt=\"Toggle Right Chats\" />\n      </button>\n      <div className={`rightchats ${showRightChats ? 'show' : ''}`}>\n        <div className={`rightchats-container ${selectedStudent ? 'selected' : ''}`}>\n          <div className='chath'>Чаты</div>\n          <div className='chatinfousers'>\n          {sortedStudents.map((student) => (\n    <div\n        key={student.id}\n        className={`student-item ${selectedStudent === student ? 'selected' : ''}`}\n        onClick={() => handleStudentClick(student)}\n    >\n        <div className='avatarka'>\n            {student.avatar && <img className='avamessages' src={`${BASE_URL}tourschoolphp/${student.avatar}`} alt={`${student.name} ${student.surname}'s Avatar`} />}\n        </div>\n        <div className='studlastmess'>\n            <div className=\"student-name\">\n                {student.name}\n                {'   '}\n                {student.surname}\n                {student.unread_messages > 0 && (\n            <div className=\"notification-dot\">{student.unread_messages}</div>\n        )}\n            </div>\n            <div className=\"student-lastmess\">\n  {student.last_message && student.last_message.message_text && student.last_message.message_text.length > 20\n    ? `${student.last_message.message_text.slice(0, 20)}...`\n    : (student.last_message && student.last_message.message_text)\n  }\n</div>\n\n        </div>\n    </div>\n))}\n          </div>\n        </div>\n      </div>\n      <div className={`leftchat ${fullscreenChat ? 'fullscreen' : ''}`}>\n        {selectedStudent && (\n        <div className=\"modal2\" onClick={() => selectedStudent.id && ReadMess(selectedStudent.id, senderId)}>\n\n<a href={`/profile/${selectedStudent.id}`} className='topnamestud'>\n              <div className='roundavatarka'>\n              {selectedStudent.avatar && <img className='avamessages' src={`${BASE_URL}tourschoolphp/${selectedStudent.avatar}`} alt={`${selectedStudent.name} ${selectedStudent.surname}'s Avatar`} />}\n      </div>\n              <h2>{selectedStudent.name} {selectedStudent.surname}</h2>\n            </a>\n            \n            <div className=\"chat-messages\" ref={chatMessagesRef}>\n      {messages[selectedStudent.id]?.map((message, index) => {\n        const currentDate = formatMessageDateMonth(message.created_at);\n        const showDate = prevDate !== currentDate; // Проверяем, отличается ли текущая дата от предыдущей\n\n        // Если текущая дата отличается от предыдущей, сохраняем текущую дату\n        if (showDate) {\n          prevDate = currentDate;\n        }\n\n        return (\n          <div key={index} className={message.sender_user_id === senderId ? 'outgoing_msg' : 'incoming_msg'}>\n            {showDate && (\n              <div className=\"message-date\">\n                {currentDate}\n              </div>\n            )}\n           <div className=\"msg\">\n\n{(message.message_text || message.file_name) && (\n  <div className={message.sender_user_id === senderId ? 'outgoing-text' : 'incoming-text'}>\n    {formatMessageText(message.message_text)}\n    {message.file_name && (\n      <div className={`file-container ${message.sender_user_id === senderId ? 'outgoing-file' : 'incoming-file'}`}>\n        {message.file_name.includes('.jpg') || message.file_name.includes('.jpeg') || message.file_name.includes('.png') ? (\n          <>\n            {/* Render image with alt text and optional placeholder */}\n            <img\n              className='picturemess'\n              src={`${BASE_URL}tourschoolphp/${message.file_name}`}\n              alt=\"Attached Image\"\n              onError={(e) => e.target.src = 'path/to/placeholder.jpg'} // Optional placeholder\n            />\n            <img className='forw' src=\"./forward.svg\" alt=\"Forward Icon\" onClick={() => handleForwClick(message.file_name)} />\n          </>\n        ) : (\n          /* Handle non-image files */\n          <a\n            className='ahrew'\n            href={`${BASE_URL}tourschoolphp/${message.file_name}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <span style={{ lineHeight: '60px' }}>{message.file_name.slice(4)}</span>\n          </a>\n        )}\n      </div>\n    )}\n \n \n    <span className=\"message-date\">\n      {formatMessageDate(message.created_at)}\n    </span>\n  </div>\n)}\n</div>\n          </div>\n        );\n      })}\n    </div>\n     \n            <div className='alltextandyellow'>\n              <div className='yellowbuttonchat2'>\n                <label htmlFor=\"fileInput\">\n                  <img src=\"./clip.svg\" alt=\"Attach File\" />\n                </label>\n                <input\n                  id=\"fileInput\"\n                  type=\"file\"\n                  accept=\".pdf, .doc, .docx, .jpg, .jpeg, .png\"\n                  onChange={(e) => handleFileChange(e.target.files)}\n                  style={{ display: 'none' }}\n                />\n              </div>\n  \n              {attachedFile && (\n                <div className=\"attached-file-info\">\n                  <span>{attachedFile.name}</span>\n                  <span>- {attachedFile.size} bytes</span>\n                </div>\n              )}\n  \n              <div className=\"chat-input\">\n                <textarea\n                  className=\"inin\"\n                  value={message}\n                  placeholder=\"Сообщение\"\n                  onChange={(e) => setMessage(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                />\n                <div className='yellowbuttonchat'>\n                <img src=\"./sendmessage.svg\" onClick={handleSendMessage} alt=\"Send Message\" />\n\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n   \n  \n\n   \n      {showUserModal && (\n  <div className=\"modal-overlay4\">\n    <div className=\"modal4\">\n      <div className={`rightchats2 ${showRightChats ? 'show' : ''}`}>\n        <button onClick={() => setShowUserModal(false)}>Отменить</button>\n        <div\n          className={`stuсdent-item ${selectAll ? 'selected' : ''}`}\n          onClick={() => handleStudentsClick({ id: 'selectAll' })}\n        >\n          <div className={`student-name2 ${selectAll ? 'selected-name' : ''}`}>\n            Выбрать всех\n          </div>\n        </div>\n\n        <div className={`rightchats-container ${selectedStudents.length > 0 ? 'selected' : ''}`}>\n          <div className='chatinfousers'>\n            {/* Остальные студенты */}\n            {students.map((student) => (\n              <div\n                key={student.id}\n                className={`student-item ${selectedStudents.some((selectedStudent) => selectedStudent.id === student.id) ? 'selected' : ''}`}\n                onClick={() => handleStudentsClick(student)}\n              >\n                <div className={`avatarka ${selectedStudents.some((selectedStudent) => selectedStudent.id === student.id) ? 'selected-avatar' : ''}`}></div>\n                <div className={`student-name ${selectedStudents.some((selectedStudent) => selectedStudent.id === student.id) ? 'selected-name' : ''}`}>\n                  {student.name} {student.surname}\n                  {unreadMessages[student.id] && <div className=\"notification-dot\"></div>}\n                </div>\n              </div>\n            ))}\n          </div>\n          {selectedStudents.length > 0 && (\n            <button className=\"send-button\" onClick={handleSendButtonClick}>\n              Отправить\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  </div>\n)}\n\n\n    </div>\n\n    \n  );\n  \n};\n\nexport default ListStudents;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}