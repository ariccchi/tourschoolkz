{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import'./startcourse.css';import Navpanmini from'./navpanmini.js';import{jwtDecode}from'jwt-decode';import axios from\"axios\";import LessonListPage from'./Lessonlist.js';import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Startnewcourse(){const{title}=useParams();const titleWithSpaces=title.replace(/-/g,' ');const[responseData,setResponseData]=useState(null);const token=localStorage.getItem('token');const navigate=useNavigate();// Декодируем JWT токен\nconst decoded=jwtDecode(token);const user_id=decoded.sub;const fetchData=useCallback(async()=>{try{const response=await axios.post(\"\".concat(BASE_URL,\"tourschoolphp/startcourseinfo.php\"),{title:titleWithSpaces});if(!response.data){throw new Error('Пустой ответ от сервера');}setResponseData(response.data);}catch(error){console.error('Ошибка при запросе данных:',error);}},[titleWithSpaces]);useEffect(()=>{fetchData();},[fetchData]);const handleButtonClick=async courseId=>{try{const response=await axios.post(\"\".concat(BASE_URL,\"tourschoolphp/startcourse.php\"),{course_id:courseId,user_id:user_id});if(!response.data){throw new Error('Пустой ответ от сервера');}// Перенаправляем пользователя на страницу списка уроков\nwindow.location.reload();}catch(error){console.error('Ошибка при запросе данных:',error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navpanmini,{}),responseData&&responseData.map((course,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"containerstartcourse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"titlecourse\",children:titleWithSpaces}),/*#__PURE__*/_jsxs(\"div\",{className:\"containersta\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"conttop\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BASE_URL,\"tourschoolphp/\").concat(course.image_url),className:\"imagecourse\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightcont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"courseinfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"titlecoursemini\",children:course.course_name}),/*#__PURE__*/_jsx(\"div\",{className:\"coursetype\",children:course.type}),/*#__PURE__*/_jsxs(\"div\",{className:\"lessandtime\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgandless\",children:/*#__PURE__*/_jsx(\"div\",{className:\"lessimg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"imgandtime\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttontostart\",onClick:()=>handleButtonClick(course.id),children:\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0438\\u0437\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043A\\u0443\\u0440\\u0441\\u0430\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"description\",children:course.course_description})]})]},index))]});}export default Startnewcourse;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","Navpanmini","jwtDecode","axios","LessonListPage","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Startnewcourse","title","titleWithSpaces","replace","responseData","setResponseData","token","localStorage","getItem","navigate","decoded","user_id","sub","fetchData","response","post","concat","data","Error","error","console","handleButtonClick","courseId","course_id","window","location","reload","children","map","course","index","className","src","image_url","course_name","type","onClick","id","course_description"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/Startnewcourse.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './startcourse.css';\nimport Navpanmini from './navpanmini.js';\nimport { jwtDecode } from 'jwt-decode'; \nimport axios from \"axios\";\nimport LessonListPage from './Lessonlist.js';\nimport { BASE_URL } from './config';\nfunction Startnewcourse() {\n    const { title } = useParams();\n    const titleWithSpaces = title.replace(/-/g, ' ');\n    const [responseData, setResponseData] = useState(null); \n    const token = localStorage.getItem('token');\n    const navigate = useNavigate();\n\n    // Декодируем JWT токен\n    const decoded = jwtDecode(token);\n    const user_id = decoded.sub;\n\n    const fetchData = useCallback(async () => {\n        try {\n            const response = await axios.post(`${BASE_URL}tourschoolphp/startcourseinfo.php`, {\n                title: titleWithSpaces,\n            });\n\n            if (!response.data) {\n                throw new Error('Пустой ответ от сервера');\n            }\n\n            setResponseData(response.data);\n        } catch (error) {\n            console.error('Ошибка при запросе данных:', error);\n        }\n    }, [titleWithSpaces]);\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n    const handleButtonClick = async (courseId) => {\n        try {\n          const response = await axios.post(`${BASE_URL}tourschoolphp/startcourse.php`, {\n            course_id: courseId,\n            user_id: user_id,\n          });\n      \n          if (!response.data) {\n            throw new Error('Пустой ответ от сервера');\n          }\n      \n          // Перенаправляем пользователя на страницу списка уроков\n          window.location.reload();\n        } catch (error) {\n          console.error('Ошибка при запросе данных:', error);\n        }\n      };\n      \n\n    return (\n        <>\n        <Navpanmini />\n        {responseData && responseData.map((course, index) => (\n            <div className='containerstartcourse' key={index}>\n        <div className='titlecourse'>{titleWithSpaces}</div>\n\n        <div className='containersta'>\n            <div className='conttop'>\n        <img src = {`${BASE_URL}tourschoolphp/${course.image_url}`}className='imagecourse'>\n        </img>\n        <div className='rightcont'>\n        <div className='courseinfo'>\n            <div className='titlecoursemini'>{course.course_name}</div>\n            \n            <div className='coursetype'>{course.type}</div>\n            <div className='lessandtime'>\n                <div className='imgandless'>\n                    <div className='lessimg'></div>\n                   \n\n                </div>\n                <div className='imgandtime'>\n                 \n                 \n                </div>\n            </div>\n        </div>\n        \n        <div className='buttontostart' onClick={() => handleButtonClick(course.id)}>Начать изучение курса</div>\n\n\n        </div>\n        </div>\n        <div className='description'>{course.course_description}</div>\n        </div>\n        </div>\n        ))}\n\n        </>\n    )\n}\n\nexport default Startnewcourse;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}