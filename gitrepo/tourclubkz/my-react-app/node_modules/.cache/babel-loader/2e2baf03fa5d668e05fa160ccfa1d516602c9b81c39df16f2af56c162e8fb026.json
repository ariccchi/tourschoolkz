{"ast":null,"code":"import React,{useState,useEffect}from'react';import Navpanmini from'./navpanmini.js';import'./courses.css';import{useParams,useNavigate}from'react-router-dom';import{jwtDecode}from'jwt-decode';import LessonListPanel from'./lessonlistpanel';import SumResult from'./result.js';import{Link}from'react-router-dom';import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function LessonsPanel(){const[showModal,setShowModal]=useState(false);const[selectedNav,setSelectedNav]=useState('all');const{title}=useParams();const titleWithSpaces=title.replace(/-/g,' ');const[data,setData]=useState([]);const token=localStorage.getItem('token');const decodedToken=jwtDecode(token);const id=decodedToken.sub;const handleImageClick=()=>{setShowModal(true);};const handleNavClick=nav=>{setSelectedNav(nav);};const closeModal=()=>{setShowModal(false);};const navigate=useNavigate();useEffect(()=>{const fetchData2=async()=>{try{// Выполняем HTTP запрос к PHP файлу\nconst response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/Checkadmin.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:id})});const data=await response.json();setData(data);}catch(error){console.error('Ошибка при загрузке данных:',error);}};fetchData2();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"coursesh2\",children:titleWithSpaces}),data.role==='admin'&&/*#__PURE__*/_jsx(Link,{className:\"Addlessonbutton\",to:\"/Addlesson/\".concat(title),children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0443\\u0440\\u043E\\u043A\"}),showModal&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u042D\\u0442\\u043E \\u0432\\u0430\\u0448\\u0435 \\u043C\\u043E\\u0434\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043E\\u043A\\u043D\\u043E!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"linewithnav2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"textnav \".concat(selectedNav==='all'?'active':''),onClick:()=>handleNavClick('all'),children:\"\\u0423\\u0440\\u043E\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"textnav \".concat(selectedNav==='Туризм по направлениям'?'active':''),onClick:()=>handleNavClick('Туризм по направлениям'),children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B\"})]}),selectedNav==='all'&&/*#__PURE__*/_jsx(LessonListPanel,{}),selectedNav==='Общий туризм'&&navigate('/messages'),selectedNav==='Туризм по направлениям'&&/*#__PURE__*/_jsx(SumResult,{}),/*#__PURE__*/_jsx(Navpanmini,{})]});}export default LessonsPanel;","map":{"version":3,"names":["React","useState","useEffect","Navpanmini","useParams","useNavigate","jwtDecode","LessonListPanel","SumResult","Link","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LessonsPanel","showModal","setShowModal","selectedNav","setSelectedNav","title","titleWithSpaces","replace","data","setData","token","localStorage","getItem","decodedToken","id","sub","handleImageClick","handleNavClick","nav","closeModal","navigate","fetchData2","response","fetch","concat","method","headers","body","JSON","stringify","user","json","error","console","children","className","role","to","onClick"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/LessonsPanel.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport Navpanmini from './navpanmini.js';\nimport './courses.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport LessonListPanel from './lessonlistpanel';\nimport SumResult from './result.js';\nimport { Link } from 'react-router-dom';\nimport { BASE_URL } from './config';\nfunction LessonsPanel() {\n    const [showModal, setShowModal] = useState(false);\n    const [selectedNav, setSelectedNav] = useState('all');\n    const { title } = useParams();\n    const titleWithSpaces = title.replace(/-/g, ' ');\n    const [data, setData] = useState([]);\n    const token = localStorage.getItem('token');\n    const decodedToken = jwtDecode(token);\n    const id = decodedToken.sub;\n    const handleImageClick = () => {\n        setShowModal(true);\n    }\n\n    const handleNavClick = (nav) => {\n        setSelectedNav(nav);\n    }\n\n    const closeModal = () => {\n        setShowModal(false);\n    }\n    const navigate = useNavigate();\n    useEffect(() => {\n        const fetchData2 = async () => {\n          try {\n            // Выполняем HTTP запрос к PHP файлу\n            const response = await fetch(`${BASE_URL}tourschoolphp/Checkadmin.php`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({ user: id }),\n            });\n      \n            const data = await response.json();\n      \n            setData(data);\n          } catch (error) {\n            console.error('Ошибка при загрузке данных:', error);\n          }\n        };\n      \n        fetchData2();\n      }, []); \n\n    return(\n        <>\n        \n        <div className=\"header2\">\n            <div className=\"coursesh2\">{titleWithSpaces}</div>\n            {data.role === 'admin' && (\n  <Link className=\"Addlessonbutton\"  to={`/Addlesson/${title}`}>Добавить урок\n  </Link>\n)}\n        \n            {showModal && (\n                <div className=\"modal\">\n                    <button onClick={closeModal}>Закрыть</button>\n                    <p>Это ваше модальное окно!</p>\n                </div>\n            )}\n        </div>\n        <div className=\"linewithnav2\">\n         \n            <div className={`textnav ${selectedNav === 'all' ? 'active' : ''}`} onClick={() => handleNavClick('all')}>Уроки</div>\n            <div className={`textnav ${selectedNav === 'Туризм по направлениям' ? 'active' : ''}`} onClick={() => handleNavClick('Туризм по направлениям')}>Результаты</div>\n       \n        </div>\n        {selectedNav === 'all' && <LessonListPanel/>}\n     \n        {selectedNav === 'Общий туризм' && navigate('/messages')}\n        {selectedNav === 'Туризм по направлениям' && <SumResult/>}\n                {/* <LessonListPanel/> */}\n        {/* {selectedNav === 'my' && <Mycourselist />}\n        {selectedNav && <Courselist selectedNav={selectedNav} />} */}\n       \n        <Navpanmini />\n      </>\n    )\n    \n}\nexport default LessonsPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}