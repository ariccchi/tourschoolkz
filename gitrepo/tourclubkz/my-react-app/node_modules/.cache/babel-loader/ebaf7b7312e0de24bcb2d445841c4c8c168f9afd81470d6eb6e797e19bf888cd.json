{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{jwtDecode}from'jwt-decode';import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Mycourselist=()=>{const[data,setData]=useState([]);const[selectedNav,setSelectedNav]=useState('all');useEffect(()=>{const fetchData=async()=>{// Ваш JWT токен\nconst token=localStorage.getItem('token');// Декодируем JWT токен\n// Декодируем JWT токен\nlet decoded=jwtDecode(token);// Получаем user_id из декодированного токена\nlet user_id=decoded.sub;// Выполняем HTTP запрос к PHP файлу\nconst response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/mycourselist.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user_id})});const data=await response.json();setData(data);};fetchData();},[selectedNav]);const items=data.map((item,index)=>{const link=item.course_name.replace(/\\s/g,'-');return/*#__PURE__*/_jsx(\"div\",{className:\"courselink\",children:/*#__PURE__*/_jsxs(Link,{to:link,children:[/*#__PURE__*/_jsx(\"div\",{className:\"courseimg\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BASE_URL,\"tourschoolphp/\").concat(item.image_url),alt:\"Tour Image\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"coursetype\",children:item.type}),/*#__PURE__*/_jsx(\"div\",{className:\"coursename\",children:item.course_name}),/*#__PURE__*/_jsx(\"div\",{className:\"coursesinfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"courseslessons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"infocont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imageles\",children:/*#__PURE__*/_jsx(\"img\",{src:\"../layer.svg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoles\",children:[\" \\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0443\\u0440\\u043E\\u043A\\u043E\\u0432: \",item.lesson_count]})]})})})]})},index);});return/*#__PURE__*/_jsx(\"div\",{className:\"courseslist\",children:items});};export default Mycourselist;","map":{"version":3,"names":["React","useEffect","useState","Link","jwtDecode","BASE_URL","jsx","_jsx","jsxs","_jsxs","Mycourselist","data","setData","selectedNav","setSelectedNav","fetchData","token","localStorage","getItem","decoded","user_id","sub","response","fetch","concat","method","headers","body","JSON","stringify","json","items","map","item","index","link","course_name","replace","className","children","to","src","image_url","alt","type","lesson_count"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/my_courses.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport { BASE_URL } from './config';\nconst Mycourselist = () => {\n    const [data, setData] = useState([]);\n    const [selectedNav, setSelectedNav] = useState('all');\n\n    useEffect(() => {\n        const fetchData = async () => {\n            // Ваш JWT токен\n            const token = localStorage.getItem('token');\n\n            // Декодируем JWT токен\n           // Декодируем JWT токен\nlet decoded = jwtDecode(token);\n\n// Получаем user_id из декодированного токена\nlet user_id = decoded.sub;\n\n            // Выполняем HTTP запрос к PHP файлу\n            const response = await fetch(`${BASE_URL}tourschoolphp/mycourselist.php`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({user_id: user_id}),\n            });\n\n            const data = await response.json();\n            setData(data);\n        }\n        fetchData();\n    }, [selectedNav]);\n\n\n\n    const items = data.map((item, index) => {\n        const link = item.course_name.replace(/\\s/g, '-');\n        return (\n          <div key={index} className='courselink'>\n            <Link to={link}>      \n                <div className=\"courseimg\">\n                <img src={`${BASE_URL}tourschoolphp/${item.image_url}`} alt=\"Tour Image\" />\n                </div>\n                <div className=\"coursetype\">{item.type}</div>\n                <div className=\"coursename\">{item.course_name}</div>\n                <div className=\"coursesinfo\">\n                    <div className=\"courseslessons\">\n                        <div className=\"infocont\">\n                            <div className=\"imageles\">\n                                <img src=\"../layer.svg\"></img>\n                            </div>\n                            <div className=\"infoles\"> Количество уроков: {item.lesson_count}</div>\n                        </div>\n                     \n                    </div>\n                </div>\n            </Link>\n          </div>\n        );\n    });\n    \n    return <div className='courseslist'>{items}\n    \n    </div>;\n};\n\nexport default Mycourselist;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}