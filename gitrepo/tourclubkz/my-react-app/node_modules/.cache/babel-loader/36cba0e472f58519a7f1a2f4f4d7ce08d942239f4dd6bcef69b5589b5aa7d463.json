{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Switch,Route,Link,Routes}from'react-router-dom';import{jwtDecode}from'jwt-decode';import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function StudentList(_ref){var _complexArray$,_complexArray$2;let{complexArray}=_ref;const token=localStorage.getItem('token');const[Curatordata,setCuratorData]=useState([]);const[Admindata,setAdminData]=useState([]);const[loading,setLoading]=useState(true);const decodedToken=jwtDecode(token);const[data,setData]=useState([]);const[data3,setData3]=useState([]);const id=decodedToken.sub;const role=decodedToken.role;useEffect(()=>{const fetchData=async()=>{try{if(complexArray&&complexArray.length>0){if(complexArray[0].role==='curator'){const curatorResponse=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/curatorlist.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:complexArray[0].id})});const curatorData=await curatorResponse.json();setCuratorData(curatorData);}else if(complexArray[0].role==='admin'){const adminResponse=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/adminlist.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:complexArray[0].id})});const adminData=await adminResponse.json();setAdminData(adminData);}}}catch(error){console.error('Ошибка при загрузке данных:',error);}finally{setLoading(false);}};fetchData();},[complexArray[0].id]);const isCurator=((_complexArray$=complexArray[0])===null||_complexArray$===void 0?void 0:_complexArray$.role)==='curator';const isAdmin=((_complexArray$2=complexArray[0])===null||_complexArray$2===void 0?void 0:_complexArray$2.role)==='admin';return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"studentsprofilelist\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[Curatordata.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:Curatordata.map((student,index)=>/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(student.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"namesurnameprofile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"imgavatarstud\",src:\"\".concat(BASE_URL,\"tourschoolphp/\").concat(student.avatar)}),/*#__PURE__*/_jsxs(\"div\",{className:\"namesurname\",children:[student.name,\" \",student.surname]})]},index)},index))}),isAdmin&&Admindata.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"infoprofile\"}),Admindata.map((student,index)=>/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(student.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"namesurnameprofile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"imgavatarstud\",src:\"\".concat(BASE_URL,\"tourschoolphp/\").concat(student.avatar)}),/*#__PURE__*/_jsxs(\"div\",{className:\"namesurname\",children:[student.name,\" \",student.surname]})]},index)},index))]})]})})});}export default StudentList;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","Routes","jwtDecode","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StudentList","_ref","_complexArray$","_complexArray$2","complexArray","token","localStorage","getItem","Curatordata","setCuratorData","Admindata","setAdminData","loading","setLoading","decodedToken","data","setData","data3","setData3","id","sub","role","fetchData","length","curatorResponse","fetch","concat","method","headers","body","JSON","stringify","user","curatorData","json","adminResponse","adminData","error","console","isCurator","isAdmin","children","className","map","student","index","to","src","avatar","name","surname"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/studentlist.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link, Routes } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport { BASE_URL } from './config';\nfunction StudentList ({ complexArray }) {\n    \n    const token = localStorage.getItem('token');\n    const [Curatordata, setCuratorData] = useState([]);\n    const [Admindata, setAdminData] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const decodedToken = jwtDecode(token);\n    const [data, setData] = useState([]);\n  \n    const [data3, setData3] = useState([]);\n    const id = decodedToken.sub;\n    const role = decodedToken.role;\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                if (complexArray && complexArray.length > 0) {\n                    if (complexArray[0].role === 'curator') {\n                        const curatorResponse = await fetch(`${BASE_URL}tourschoolphp/curatorlist.php`, {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json',\n                            },\n                            body: JSON.stringify({ user: complexArray[0].id }),\n                        });\n\n                        const curatorData = await curatorResponse.json();\n                        setCuratorData(curatorData);\n                    } else if (complexArray[0].role === 'admin') {\n                        const adminResponse = await fetch(`${BASE_URL}tourschoolphp/adminlist.php`, {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json',\n                            },\n                            body: JSON.stringify({ user: complexArray[0].id  }),\n                        });\n\n                        const adminData = await adminResponse.json();\n                        setAdminData(adminData);\n                    }\n                }\n            } catch (error) {\n                console.error('Ошибка при загрузке данных:', error);\n            } finally {\n                setLoading(false);\n            }\n\n          \n        }\n\n        fetchData();\n    }, [complexArray[0].id ]);\n    const isCurator = complexArray[0]?.role === 'curator';\n    const isAdmin = complexArray[0]?.role === 'admin';\nreturn (\n<> \n        <div className=\"studentsprofilelist\">\n       \n<>\n\n{Curatordata.length > 0 && (\n    <>\n        {Curatordata.map((student, index) => (\n            <Link to={`/profile/${student.id}`} key={index}>\n                <div className=\"namesurnameprofile\" key={index}>\n                <img className=\"imgavatarstud\" src= {`${BASE_URL}tourschoolphp/${student.avatar}` }></img>\n                    <div className=\"namesurname\">\n                        {student.name} {student.surname}\n                    </div>\n                </div>\n            </Link>\n        ))}\n    </>\n)}\n\n{isAdmin && Admindata.length > 0 && (\n    <>\n        <div className=\"infoprofile\"></div>\n        {Admindata.map((student, index) => (\n            <Link to={`/profile/${student.id}`} key={index}>\n                <div className=\"namesurnameprofile\" key={index}>\n                    <img className=\"imgavatarstud\" src= {`${BASE_URL}tourschoolphp/${student.avatar}` }></img>\n                    <div className=\"namesurname\">\n                        {student.name} {student.surname}\n                    </div>\n                </div>\n            </Link>\n        ))}\n    </>\n)}\n\n</>\n\n        </div>\n        </>\n)\n\n\n}\n\nexport default StudentList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}