{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/tourclubschool/tourclubkz/my-react-app/src/redactstudentinfo.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BlockUser({\n  value1,\n  value2,\n  value3,\n  value4\n}) {\n  _s();\n  var _value4$, _value2$, _value4$2, _value3$;\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [blockReason, setBlockReason] = useState('');\n  const handleBlockClick = () => {\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n  const handleBlockUser = async () => {\n    console.log(value1);\n    try {\n      // Отправляем измененные данные на сервер\n      const response = await fetch('http://localhost:8888/tourschoolphp/Blockuser.php', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: value1,\n          curatorid: value2,\n          blockReason: blockReason // Use blockReason directly from state\n        })\n      });\n      const newData = await response.json();\n    } catch (error) {\n      console.error('Ошибка при сохранении данных:', error);\n    }\n    setIsModalOpen(false);\n    window.location.reload();\n  };\n  const handleUnblockUser = async () => {\n    try {\n      const response = await fetch('http://localhost:8888/tourschoolphp/Unblockuser.php', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: value1,\n          curatorid: value2\n        })\n      });\n      const newData = await response.json();\n    } catch (error) {\n      console.error('Ошибка при разблокировке пользователя:', error);\n    }\n    setIsModalOpen(false);\n    window.location.reload();\n  };\n  const isCurator = ((_value4$ = value4[0]) === null || _value4$ === void 0 ? void 0 : _value4$.role) === 'curator';\n  const isCurrentUserCurator = ((_value2$ = value2[0]) === null || _value2$ === void 0 ? void 0 : _value2$.curator) === value3;\n  const isAdmin = ((_value4$2 = value4[0]) === null || _value4$2 === void 0 ? void 0 : _value4$2.role) === 'admin';\n  const isUserBlocked = ((_value3$ = value3[0]) === null || _value3$ === void 0 ? void 0 : _value3$.user_exists_in_blocks) === 1;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isUserBlocked && isCurrentUserCurator || isAdmin && !isUserBlocked && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"redactirovat\",\n        onClick: handleBlockClick,\n        children: \"\\u0417\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)\n    }, void 0, false), isUserBlocked && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"blocked-message2\",\n        children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0437\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"blocked-message2\",\n        children: [\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430: \", value3[0].block_reason]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), isUserBlocked && isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"redactirovat2\",\n        onClick: handleBlockClick,\n        children: \"\\u0420\\u0430\\u0437\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false), isModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal3\",\n        children: isAdmin && isUserBlocked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCloseModal,\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleUnblockUser,\n            children: \"\\u0420\\u0430\\u0437\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0443 \\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u043A\\u0438\",\n            onChange: e => setBlockReason(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCloseModal,\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleBlockUser,\n            children: \"\\u0417\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(BlockUser, \"SAVxmszGXgNprII3YlA1VYJEEtE=\");\n_c = BlockUser;\nexport default BlockUser;\nvar _c;\n$RefreshReg$(_c, \"BlockUser\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","BlockUser","value1","value2","value3","value4","_s","_value4$","_value2$","_value4$2","_value3$","isModalOpen","setIsModalOpen","blockReason","setBlockReason","handleBlockClick","handleCloseModal","handleBlockUser","console","log","response","fetch","method","headers","body","JSON","stringify","user","curatorid","newData","json","error","window","location","reload","handleUnblockUser","isCurator","role","isCurrentUserCurator","curator","isAdmin","isUserBlocked","user_exists_in_blocks","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","block_reason","type","placeholder","onChange","e","target","value","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/tourclubschool/tourclubkz/my-react-app/src/redactstudentinfo.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction BlockUser({ value1, value2, value3, value4 }) {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [blockReason, setBlockReason] = useState('');\n    const handleBlockClick = () => {\n        setIsModalOpen(true);\n    };\n\n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n    };\n    const handleBlockUser = async () => {\n        console.log(value1);\n        try {\n            // Отправляем измененные данные на сервер\n            const response = await fetch('http://localhost:8888/tourschoolphp/Blockuser.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    user: value1,\n                    curatorid: value2,\n                    blockReason: blockReason, // Use blockReason directly from state\n                }),\n            });\n    \n            const newData = await response.json();\n    \n    \n        } catch (error) {\n            console.error('Ошибка при сохранении данных:', error);\n        }\n        setIsModalOpen(false);\n        window.location.reload();\n    };\n\n    const handleUnblockUser = async () => {\n        try {\n            const response = await fetch('http://localhost:8888/tourschoolphp/Unblockuser.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    user: value1,\n                    curatorid: value2,\n                }),\n            });\n    \n            const newData = await response.json();\n        } catch (error) {\n            console.error('Ошибка при разблокировке пользователя:', error);\n        }\n        setIsModalOpen(false);\n        window.location.reload();\n    };\n    const isCurator = value4[0]?.role === 'curator';\n    const isCurrentUserCurator = value2[0]?.curator === value3;\n    const isAdmin = value4[0]?.role === 'admin';\n    const isUserBlocked = value3[0]?.user_exists_in_blocks === 1;\n    return (\n        <>\n        {(!isUserBlocked && isCurrentUserCurator) || (isAdmin && !isUserBlocked) && (\n            <>\n                {/* <button className=\"redactirovat\" onClick={handleEditClick}>Редактировать</button> */}\n                <button className=\"redactirovat\" onClick={handleBlockClick}>Заблокировать</button>\n            </>\n        )}\n         {isUserBlocked && (\n                <>\n                <h1 className=\"blocked-message2\">Пользователь заблокирован</h1> \n                <h1 className=\"blocked-message2\">Причина: {value3[0].block_reason}</h1> \n                </>\n            )}\n           {(isUserBlocked && isAdmin) && (\n            <>\n               \n                <button className=\"redactirovat2\" onClick={handleBlockClick}>Разблокировать</button>\n            </>\n        )}\n          {isModalOpen && (\n            <div className=\"modal-overlay3\">\n                <div className=\"modal3\">\n                    {isAdmin && isUserBlocked ? (\n                        <>\n                            <h2>Вы уверены, что хотите разблокировать пользователя?</h2>\n                            <button onClick={handleCloseModal}>Отмена</button>\n                            <button onClick={handleUnblockUser}>Разблокировать</button>\n                        </>\n                    ) : (\n                        <>\n                            <h2>Вы уверены, что хотите заблокировать пользователя?</h2>\n                            <input\n                                type=\"text\"\n                                placeholder=\"Введите причину блокировки\"\n                                onChange={(e) => setBlockReason(e.target.value)}\n                            />\n                            <button onClick={handleCloseModal}>Отмена</button>\n                            <button onClick={handleBlockUser}>Заблокировать</button>\n                        </>\n                    )}\n                </div>\n            </div>\n        )}\n        </>\n    )\n}\n\nexport default BlockUser;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}