{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Navpanmini from'./navpanmini';import{jwtDecode}from'jwt-decode';import{BrowserRouter as Router,Switch,Route,Link,Routes}from'react-router-dom';import{useParams}from'react-router-dom';import'./profile.css';import axios from'axios';import{useNavigate}from'react-router-dom';import StudentList from\"./studentlist\";import BlockUser from\"./redactstudentinfo\";import{BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Studprof(){var _data2$,_data$,_data2$2,_data2$3,_data$2;const token=localStorage.getItem('token');const[data,setData]=useState([]);const[data2,setData2]=useState([]);const[data3,setData3]=useState([]);const{person}=useParams();const[datame,setDatame]=useState([]);const decodedToken=jwtDecode(token);const id=decodedToken.sub;const role=decodedToken.role;const name=decodedToken.name;const surname=decodedToken.surname;const[isModalOpen,setIsModalOpen]=useState(false);const[selectedNav,setSelectedNav]=useState('all');const[Curatordata,setCuratorData]=useState([]);const navigate=useNavigate();const[Admindata,setAdminData]=useState([]);const[loading,setLoading]=useState(true);const[showRightChats,setShowRightChats]=useState(true);const[selectedImage,setSelectedImage]=useState(null);const[selectedImageToDB,setSelectedImageToDB]=useState(null);useEffect(()=>{const fetchData=async()=>{try{// Выполняем HTTP запрос к PHP файлу\nconst response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/showavatar.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:person})});const data=await response.json();setData(data);}catch(error){console.error('Ошибка при загрузке данных:',error);}finally{// Устанавливаем статус загрузки в false после завершения запроса\nsetLoading(false);}};fetchData();},[person]);useEffect(()=>{const fetchData=async()=>{try{const response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/myuserinfo.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:person})});const data2=await response.json();setData2(data2);if(role!=='admin'&&role!=='curator'){navigate('/profile');}const responseme=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/myuserinfo.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:id})});const datame=await responseme.json();setDatame(datame);}catch(error){console.error('Ошибка при загрузке данных:',error);}finally{setLoading(false);}try{const response=await fetch(\"\".concat(BASE_URL,\"tourschoolphp/myusercourses.php\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:person})});const data3=await response.json();setData3(data3);}catch(error){console.error('Ошибка при загрузке данных:',error);}finally{setLoading(false);}};fetchData();},[person]);const handleOpenModal=()=>{setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);};console.log(data2);const avatarSrc=data.avatar?\"\".concat(BASE_URL,\"tourschoolphp/\").concat(data.avatar):null;const roleNames={student:'Студент',curator:'Куратор',admin:'Администратор'};// Получение русского названия роли\nconst russianRole=(_data2$=data2[0])!==null&&_data2$!==void 0&&_data2$.role?roleNames[data2[0].role]:'';// Преобразование формата даты\nconst birthdate=(_data$=data[0])!==null&&_data$!==void 0&&_data$.birthdate?new Date(data[0].birthdate):null;// Преобразование формата даты\nconst formattedBirthdate=birthdate?\"\".concat(birthdate.getDate(),\".\").concat((birthdate.getMonth()+1).toString().padStart(2,'0'),\".\").concat(birthdate.getFullYear()):'';const isCurator=((_data2$2=data2[0])===null||_data2$2===void 0?void 0:_data2$2.role)==='curator';const isAdmin=((_data2$3=data2[0])===null||_data2$3===void 0?void 0:_data2$3.role)==='admin';console.log((_data$2=data[0])===null||_data$2===void 0?void 0:_data$2.role);const handleNavClick=nav=>{setSelectedNav(nav);setShowRightChats(!showRightChats);};const handleToggleRightChats=()=>{setShowRightChats(!showRightChats);};const handleImageUpload=event=>{const file=event.target.files[0];// Проверка на размер файла (не более 5MB)\nif(file&&file.size>5*1024*1024){alert('Файл слишком большой. Выберите файл размером менее 5MB.');return;}// Создание объекта URL для отображения изображения\nconst imageUrl=URL.createObjectURL(file);// Сохранение изображения в состояние\nsetSelectedImage(imageUrl);setSelectedImageToDB(file);// Дополнительная логика (если нужно)\n};const handleSaveImage=async()=>{try{const formData=new FormData();formData.append('image',selectedImageToDB);formData.append('user_id',person);const response=await axios.post(\"\".concat(BASE_URL,\"tourschoolphp/addAvatar.php\"),formData,{headers:{'Content-Type':'multipart/form-data'}});window.location.reload();}catch(error){console.error('Error sending message:',error);}handleCloseModal();};console.log(Admindata);return/*#__PURE__*/_jsxs(\"div\",{className:\"containerprofile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"photoanddannie\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"avatarphoto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h3avatar\",children:\"\\u0424\\u043E\\u0442\\u043E \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"img\",{className:\"avatarprofile\",src:avatarSrc,alt:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"changeavatar\",onClick:handleOpenModal,children:[/*#__PURE__*/_jsx(\"img\",{className:\"changeimg\",alt:\"avatarka\",src:\"/imgavatar.svg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changetext\",children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"})]})]}),data2&&data2.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"dannie\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"danni\",children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"danicont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graydani\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"danidb\",children:data2[0].name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"danicont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graydani\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"danidb\",children:data2[0].surname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"danicont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graydani\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"danidb\",children:data2[0].email})]}),data2[0].curator_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"danicont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graydani\",children:\"\\u041A\\u0443\\u0440\\u0430\\u0442\\u043E\\u0440\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"danidb\",children:[data2[0].curator_name,\" \",data2[0].curator_surname]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"danicont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"graydani\",children:\"\\u0420\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"danidb\",children:russianRole})]})]}),/*#__PURE__*/_jsx(BlockUser,{value1:person,value2:id,value3:data2,value4:datame})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"coursesandstudents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"coursesprofile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h3avatar\",children:\"\\u041A\\u0443\\u0440\\u0441\\u044B \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"coursesprofilelist\",children:Array.isArray(data3)&&data3.length>0?data3.map((course,index)=>/*#__PURE__*/_jsx(Link,{to:\"/courses/\".concat(course.course_name.replace(/\\s+/g,'-')),children:/*#__PURE__*/_jsx(\"div\",{className:\"lessonblockprofile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lessonRightblock\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"LessonTitle\",children:course.course_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"statusinfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lessonstatus\",children:\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0435\\u0441\\u0441:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lessonstatus2\",children:course.lesson_count>0?\"\".concat(course.completed_lesson_count,\"/\").concat(course.lesson_count,\" (\").concat(Math.round(course.completed_lesson_count/course.lesson_count*100),\"%)\"):\"0/0 (0%)\"})]})]})})},course.id||index)):/*#__PURE__*/_jsx(\"div\",{children:\"\\u042D\\u0442\\u043E\\u0442 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0435\\u0449\\u0435 \\u043D\\u0435 \\u043D\\u0430\\u0447\\u0430\\u043B \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u0433\\u043E \\u043A\\u0443\\u0440\\u0441\\u0430\"})})]}),(isAdmin||isCurator)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"danni2\",children:\"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"studentsprofile\",children:/*#__PURE__*/_jsx(StudentList,{complexArray:data2})})]})]}),/*#__PURE__*/_jsx(Navpanmini,{}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-info-overlayava\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-infoava\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-buttonava\",onClick:handleCloseModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"filediv\",accept:\"image/*\",onChange:handleImageUpload}),selectedImage&&/*#__PURE__*/_jsx(\"img\",{className:\"imgavatar\",src:selectedImage,alt:\"Uploaded\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save-button\",onClick:handleSaveImage,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})})]});}export default Studprof;","map":{"version":3,"names":["React","useState","useEffect","Navpanmini","jwtDecode","BrowserRouter","Router","Switch","Route","Link","Routes","useParams","axios","useNavigate","StudentList","BlockUser","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Studprof","_data2$","_data$","_data2$2","_data2$3","_data$2","token","localStorage","getItem","data","setData","data2","setData2","data3","setData3","person","datame","setDatame","decodedToken","id","sub","role","name","surname","isModalOpen","setIsModalOpen","selectedNav","setSelectedNav","Curatordata","setCuratorData","navigate","Admindata","setAdminData","loading","setLoading","showRightChats","setShowRightChats","selectedImage","setSelectedImage","selectedImageToDB","setSelectedImageToDB","fetchData","response","fetch","concat","method","headers","body","JSON","stringify","user","json","error","console","responseme","handleOpenModal","handleCloseModal","log","avatarSrc","avatar","roleNames","student","curator","admin","russianRole","birthdate","Date","formattedBirthdate","getDate","getMonth","toString","padStart","getFullYear","isCurator","isAdmin","handleNavClick","nav","handleToggleRightChats","handleImageUpload","event","file","target","files","size","alert","imageUrl","URL","createObjectURL","handleSaveImage","formData","FormData","append","post","window","location","reload","className","children","src","alt","onClick","length","email","curator_name","curator_surname","value1","value2","value3","value4","Array","isArray","map","course","index","to","course_name","replace","lesson_count","completed_lesson_count","Math","round","complexArray","type","accept","onChange"],"sources":["/Applications/MAMP/htdocs/gitrepo/tourclubkz/my-react-app/src/studentsprof.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Navpanmini from './navpanmini';\nimport { jwtDecode } from 'jwt-decode';\nimport { BrowserRouter as Router, Switch, Route, Link, Routes } from 'react-router-dom';\nimport {useParams} from 'react-router-dom';\nimport './profile.css';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport StudentList from \"./studentlist\";\nimport BlockUser from \"./redactstudentinfo\";\nimport { BASE_URL } from './config';\n\nfunction Studprof() {\n    const token = localStorage.getItem('token');\n    const [data, setData] = useState([]);\n    const [data2, setData2] = useState([]);\n    const [data3, setData3] = useState([]);\n    const { person } = useParams();\n    const [datame, setDatame] = useState([]);\n    const decodedToken = jwtDecode(token);\n    const id = decodedToken.sub;\n    const role = decodedToken.role;\n    const name = decodedToken.name;\n    const surname = decodedToken.surname;\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [selectedNav, setSelectedNav] = useState('all');\n    const [Curatordata, setCuratorData] = useState([]);\n \n    const navigate = useNavigate();\n    const [Admindata, setAdminData] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [showRightChats, setShowRightChats] = useState(true);\n    const [selectedImage, setSelectedImage] = useState(null);\n    const [selectedImageToDB, setSelectedImageToDB] = useState(null);\n    useEffect(() => {\n      \n        const fetchData = async () => {\n            try {\n                // Выполняем HTTP запрос к PHP файлу\n                const response = await fetch(`${BASE_URL}tourschoolphp/showavatar.php`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ user: person }),\n                });\n\n                const data = await response.json();\n                setData(data);\n\n            } catch (error) {\n                console.error('Ошибка при загрузке данных:', error);\n            } finally {\n                // Устанавливаем статус загрузки в false после завершения запроса\n                setLoading(false);\n            }\n        }\n\n        fetchData();\n    }, [person]);\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await fetch(`${BASE_URL}tourschoolphp/myuserinfo.php`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ user: person }),\n                });\n\n                const data2 = await response.json();\n                setData2(data2);\n                if(role !== 'admin' && role !== 'curator') {\n                  navigate('/profile')\n                }\n                \n\n                const responseme = await fetch(`${BASE_URL}tourschoolphp/myuserinfo.php`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ user: id }),\n                });\n\n                const datame = await responseme.json();\n                setDatame(datame);\n                \n            } catch (error) {\n                console.error('Ошибка при загрузке данных:', error);\n            } finally {\n                setLoading(false);\n            }\n\n            try {\n                const response = await fetch(`${BASE_URL}tourschoolphp/myusercourses.php`, {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json',\n                  },\n                  body: JSON.stringify({ user: person }),\n                });\n        \n                const data3 = await response.json();\n                setData3(data3);\n        \n              } catch (error) {\n                console.error('Ошибка при загрузке данных:', error);\n              } finally {\n                setLoading(false);\n              }\n        }\n\n        fetchData();\n    }, [person]);\n\n    const handleOpenModal = () => {\n        setIsModalOpen(true);\n      };\n    \n      const handleCloseModal = () => {\n        setIsModalOpen(false);\n      };\n    console.log(data2);\n    const avatarSrc = data.avatar ? `${BASE_URL}tourschoolphp/${data.avatar}` : null;\n    \n    const roleNames = {\n        student: 'Студент',\n        curator: 'Куратор',\n        admin: 'Администратор'\n      };\n      \n      // Получение русского названия роли\n    const russianRole = data2[0]?.role ? roleNames[data2[0].role] : '';\n    // Преобразование формата даты\n    const birthdate = data[0]?.birthdate ? new Date(data[0].birthdate) : null;\n    // Преобразование формата даты\n    const formattedBirthdate = birthdate ? `${birthdate.getDate()}.${(birthdate.getMonth() + 1).toString().padStart(2, '0')}.${birthdate.getFullYear()}` : '';\n    const isCurator = data2[0]?.role === 'curator';\n    const isAdmin = data2[0]?.role === 'admin';\n    console.log(data[0]?.role);\n    const handleNavClick = (nav) => {\n        setSelectedNav(nav);\n        setShowRightChats(!showRightChats);\n    }\n    const handleToggleRightChats = () => {\n        setShowRightChats(!showRightChats);\n    };\n\n     \n    const handleImageUpload = (event) => {\n        const file = event.target.files[0];\n    \n        // Проверка на размер файла (не более 5MB)\n        if (file && file.size > 5 * 1024 * 1024) {\n          alert('Файл слишком большой. Выберите файл размером менее 5MB.');\n          return;\n        }\n    \n        // Создание объекта URL для отображения изображения\n        const imageUrl = URL.createObjectURL(file);\n    \n        // Сохранение изображения в состояние\n        setSelectedImage(imageUrl);\n        setSelectedImageToDB(file)\n        // Дополнительная логика (если нужно)\n      };\n    const handleSaveImage = async () => {\n        try {\n          const formData = new FormData();\n          formData.append('image', selectedImageToDB);\n          formData.append('user_id', person)\n      \n          const response = await axios.post(\n            `${BASE_URL}tourschoolphp/addAvatar.php`,\n            formData,\n            {\n              headers: {\n                'Content-Type': 'multipart/form-data',\n              },\n            }\n          );\n      \n          window.location.reload();\n      \n        } catch (error) {\n          console.error('Error sending message:', error);\n        }\n      \n        handleCloseModal();\n      };\n      console.log(Admindata);\n\n    return (\n        <div className=\"containerprofile\">\n            <div className=\"photoanddannie\">\n                <div className=\"avatarphoto\">\n                    <div className=\"h3avatar\">Фото профиля</div>\n                    <img className=\"avatarprofile\" src={avatarSrc} alt=\"Avatar\"></img>\n                    <div className=\"changeavatar\" onClick={handleOpenModal}>\n                        <img className=\"changeimg\" alt=\"avatarka\" src=\"/imgavatar.svg\"></img>\n                        <div className=\"changetext\">Изменить фото профиля</div>\n                    </div>\n                </div>\n\n                {data2 && data2.length > 0 && (\n                    <div className=\"dannie\">\n                        <div className=\"danni\">Данные пользователя</div>\n                        <div className=\"danicont\">\n                            <div className=\"graydani\">Имя</div>\n                            <div className=\"danidb\">{data2[0].name}</div>\n                        </div>\n                        <div className=\"danicont\">\n                            <div className=\"graydani\">Фамилия</div>\n                            <div className=\"danidb\">{data2[0].surname}</div>\n                        </div>\n                        <div className=\"danicont\">\n                            <div className=\"graydani\">Email</div>\n                            <div className=\"danidb\">{data2[0].email}</div>\n                        </div>\n                        {data2[0].curator_name && (\n                        <div className=\"danicont\">\n                            <div className=\"graydani\">Куратор</div>\n                            <div className=\"danidb\">{data2[0].curator_name} {data2[0].curator_surname}</div>\n                        </div>\n                        )}\n                         <div className=\"danicont\">\n                            <div className=\"graydani\">Роль</div>\n                            <div className=\"danidb\">{russianRole}</div>\n                        </div>\n                    </div>\n                )}\n                 <BlockUser \n                \n  value1={person} \n  value2={id} \n  value3={data2} \n  value4={datame}\n/>\n            </div>\n            <div className=\"coursesandstudents\">\n                    <div className=\"coursesprofile\">\n                        <div className=\"h3avatar\">Курсы пользователя</div>\n                        <div className=\"coursesprofilelist\">\n                        {Array.isArray(data3) && data3.length > 0 ? (\n    data3.map((course, index) => (\n        <Link key={course.id || index} to={`/courses/${course.course_name.replace(/\\s+/g, '-')}`}>\n            <div className='lessonblockprofile'>\n                <div className='lessonRightblock'>\n                    <div className='LessonTitle'>{course.course_name}</div>\n                    <div className='statusinfo'>\n                        <div className='lessonstatus'>Прогресс:</div>\n                        <div className='lessonstatus2'>\n                            {course.lesson_count > 0 ?\n                                `${course.completed_lesson_count}/${course.lesson_count} (${Math.round((course.completed_lesson_count / course.lesson_count) * 100)}%)` :\n                                `0/0 (0%)`\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </Link>\n    ))\n) : (\n    <div>Этот пользователь еще не начал ни одного курса</div>\n)}\n                        </div>\n                    </div>\n                    {(isAdmin || isCurator) && (\n                             <>\n                         <div className=\"danni2\">Ученики пользователя</div>\n                    <div className=\"studentsprofile\">\n                   \n            \n                     \n        <StudentList complexArray={data2} />\n   \n\n\n                   \n                    </div>\n               \n                    </>\n                    )}\n                        \n            </div>\n            <Navpanmini />\n            {isModalOpen && (\n  <div className=\"modal-info-overlayava\">\n    <div className=\"modal-infoava\">\n      <span className=\"close-buttonava\" onClick={handleCloseModal}>\n        &times;\n      </span>\n      <input\n        type=\"file\"\n        className=\"filediv\"\n        accept=\"image/*\"\n        onChange={handleImageUpload}\n      />\n\n      {/* Отображение загруженного изображения */}\n      {selectedImage && (\n        <img className=\"imgavatar\" src={selectedImage} alt=\"Uploaded\" />\n      )}\n\n      {/* Save button */}\n      <button className=\"save-button\" onClick={handleSaveImage}>\n        Сохранить\n      </button>\n    </div>\n  </div>\n)}\n        </div>\n    );\n}\n\nexport default Studprof;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}